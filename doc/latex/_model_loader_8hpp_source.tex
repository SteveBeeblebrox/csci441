\hypertarget{_model_loader_8hpp_source}{}\doxysection{Model\+Loader.\+hpp}
\mbox{\hyperlink{_model_loader_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#ifndef \_\_CSCI441\_MODELLOADER\_HPP\_\_}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define \_\_CSCI441\_MODELLOADER\_HPP\_\_}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include <GL/glew.h>}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include <glm/glm.hpp>}}
\DoxyCodeLine{23 }
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include <stb\_image.h>}}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include <fstream>}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include <sstream>}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{35 \textcolor{preprocessor}{\#include <time.h>}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 \textcolor{preprocessor}{\#include <CSCI441/modelMaterial.hpp>}}
\DoxyCodeLine{38 }
\DoxyCodeLine{40 }
\DoxyCodeLine{44 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_c_s_c_i441}{CSCI441}} \{}
\DoxyCodeLine{45 }
\DoxyCodeLine{49     \textcolor{keyword}{class }\mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader}{ModelLoader}} \{}
\DoxyCodeLine{50     \textcolor{keyword}{public}:}
\DoxyCodeLine{53         \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_afd8c5602678127d25348714be53342a5}{ModelLoader}}();}
\DoxyCodeLine{57         \textcolor{keyword}{explicit} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_afd8c5602678127d25348714be53342a5}{ModelLoader}}( \textcolor{keyword}{const} \textcolor{keywordtype}{char}* filename );}
\DoxyCodeLine{60         \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_ab30fbbe152e05c88300f98fa33998102}{\string~ModelLoader}}();}
\DoxyCodeLine{61 }
\DoxyCodeLine{68         \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a2ee2d1efb2279540d9d89885ed173ac0}{loadModelFile}}( \textcolor{keyword}{const} \textcolor{keywordtype}{char}* filename, \textcolor{keywordtype}{bool} INFO = \textcolor{keyword}{true}, \textcolor{keywordtype}{bool} ERRORS = \textcolor{keyword}{true} );}
\DoxyCodeLine{69 }
\DoxyCodeLine{76         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a219e23f5fdc0efccb4a49138da240197}{setAttributeLocations}}(GLint positionLocation, GLint normalLocation = -\/1, GLint texCoordLocation = -\/1) \textcolor{keyword}{const};}
\DoxyCodeLine{77 }
\DoxyCodeLine{87         \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a8fb084faddc03520932564e627490654}{draw}}( GLuint shaderProgramHandle,}
\DoxyCodeLine{88                    GLint matDiffLocation = -\/1, GLint matSpecLocation = -\/1, GLint matShinLocation = -\/1, GLint matAmbLocation = -\/1,}
\DoxyCodeLine{89                    GLenum diffuseTexture = GL\_TEXTURE0 ) \textcolor{keyword}{const};}
\DoxyCodeLine{90 }
\DoxyCodeLine{96         GLuint \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_aae033d75ebda399f07ad10c71523de40}{getNumberOfVertices}}() \textcolor{keyword}{const};}
\DoxyCodeLine{102         GLfloat* \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a5c2d76360ed4fb7b31bf49aa8d9e35c7}{getVertices}}() \textcolor{keyword}{const};}
\DoxyCodeLine{108         GLfloat* \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a98b9c1bc899975fcbf0710a018b2c121}{getTexCoords}}() \textcolor{keyword}{const};}
\DoxyCodeLine{114         GLfloat* \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a8efabf9b18c039ee93367ab33d092b4e}{getNormals}}() \textcolor{keyword}{const};}
\DoxyCodeLine{120         GLuint \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a5adfe3130cc2b28713b72a58c5252bcc}{getNumberOfIndices}}() \textcolor{keyword}{const};}
\DoxyCodeLine{126         GLuint* \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a98736116c5ac6c2fc9b89b1b1b79923c}{getIndices}}() \textcolor{keyword}{const};}
\DoxyCodeLine{127 }
\DoxyCodeLine{136         \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a202848314c149e59b5211858ff082072}{enableAutoGenerateNormals}}();}
\DoxyCodeLine{145         \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_aaf1ec38a0f551569ccf1a47af2a561f3}{disableAutoGenerateNormals}}();}
\DoxyCodeLine{146 }
\DoxyCodeLine{147     \textcolor{keyword}{private}:}
\DoxyCodeLine{148         \textcolor{keywordtype}{void} \_init();}
\DoxyCodeLine{149         \textcolor{keywordtype}{bool} \_loadMTLFile( \textcolor{keyword}{const} \textcolor{keywordtype}{char} *mtlFilename, \textcolor{keywordtype}{bool} INFO, \textcolor{keywordtype}{bool} ERRORS );}
\DoxyCodeLine{150         \textcolor{keywordtype}{bool} \_loadOBJFile( \textcolor{keywordtype}{bool} INFO, \textcolor{keywordtype}{bool} ERRORS );}
\DoxyCodeLine{151         \textcolor{keywordtype}{bool} \_loadOFFFile( \textcolor{keywordtype}{bool} INFO, \textcolor{keywordtype}{bool} ERRORS );}
\DoxyCodeLine{152         \textcolor{keywordtype}{bool} \_loadPLYFile( \textcolor{keywordtype}{bool} INFO, \textcolor{keywordtype}{bool} ERRORS );}
\DoxyCodeLine{153         \textcolor{keywordtype}{bool} \_loadSTLFile( \textcolor{keywordtype}{bool} INFO, \textcolor{keywordtype}{bool} ERRORS );}
\DoxyCodeLine{154         std::vector<std::string> \_tokenizeString( std::string input, std::string delimiters );}
\DoxyCodeLine{155 }
\DoxyCodeLine{156         \textcolor{keywordtype}{char}* \_filename;}
\DoxyCodeLine{157         CSCI441\_INTERNAL::MODEL\_TYPE \_modelType;}
\DoxyCodeLine{158 }
\DoxyCodeLine{159         GLuint \_vaod;}
\DoxyCodeLine{160         GLuint \_vbods[2];}
\DoxyCodeLine{161 }
\DoxyCodeLine{162         GLfloat* \_vertices;}
\DoxyCodeLine{163         GLfloat* \_texCoords;}
\DoxyCodeLine{164         GLfloat* \_normals;}
\DoxyCodeLine{165         GLuint* \_indices;}
\DoxyCodeLine{166         GLuint \_uniqueIndex;}
\DoxyCodeLine{167         GLuint \_numIndices;}
\DoxyCodeLine{168 }
\DoxyCodeLine{169         std::map< std::string, CSCI441\_INTERNAL::ModelMaterial* > \_materials;}
\DoxyCodeLine{170         std::map< std::string, std::vector< std::pair< GLuint, GLuint > > > \_materialIndexStartStop;}
\DoxyCodeLine{171 }
\DoxyCodeLine{172         \textcolor{keywordtype}{bool} \_hasVertexTexCoords;}
\DoxyCodeLine{173         \textcolor{keywordtype}{bool} \_hasVertexNormals;}
\DoxyCodeLine{174 }
\DoxyCodeLine{175         \textcolor{keyword}{static} \textcolor{keywordtype}{bool} \_AUTO\_GEN\_NORMALS;}
\DoxyCodeLine{176     \};}
\DoxyCodeLine{177 \}}
\DoxyCodeLine{178 }
\DoxyCodeLine{181 }
\DoxyCodeLine{182 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_c_s_c_i441___i_n_t_e_r_n_a_l}{CSCI441\_INTERNAL}} \{}
\DoxyCodeLine{183     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}* createTransparentTexture( \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *imageData, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *imageMask, \textcolor{keywordtype}{int} texWidth, \textcolor{keywordtype}{int} texHeight, \textcolor{keywordtype}{int} texChannels, \textcolor{keywordtype}{int} maskChannels );}
\DoxyCodeLine{184     \textcolor{keywordtype}{void} flipImageY( \textcolor{keywordtype}{int} texWidth, \textcolor{keywordtype}{int} texHeight, \textcolor{keywordtype}{int} textureChannels, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *textureData );}
\DoxyCodeLine{185 \}}
\DoxyCodeLine{186 }
\DoxyCodeLine{187 \textcolor{keyword}{inline} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_afd8c5602678127d25348714be53342a5}{CSCI441::ModelLoader::ModelLoader}}() \{}
\DoxyCodeLine{188     \_init();}
\DoxyCodeLine{189 \}}
\DoxyCodeLine{190 }
\DoxyCodeLine{191 \textcolor{keyword}{inline} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_afd8c5602678127d25348714be53342a5}{CSCI441::ModelLoader::ModelLoader}}( \textcolor{keyword}{const} \textcolor{keywordtype}{char}* filename ) \{}
\DoxyCodeLine{192     \_init();}
\DoxyCodeLine{193     loadModelFile( filename );}
\DoxyCodeLine{194 \}}
\DoxyCodeLine{195 }
\DoxyCodeLine{196 \textcolor{keyword}{inline} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_ab30fbbe152e05c88300f98fa33998102}{CSCI441::ModelLoader::\string~ModelLoader}}() \{}
\DoxyCodeLine{197     \textcolor{keywordflow}{if}( \_vertices )             free( \_vertices );}
\DoxyCodeLine{198     \textcolor{keywordflow}{if}( \_texCoords )            free( \_texCoords );}
\DoxyCodeLine{199     \textcolor{keywordflow}{if}( \_normals )              free( \_normals );}
\DoxyCodeLine{200     \textcolor{keywordflow}{if}( \_indices )              free( \_indices );}
\DoxyCodeLine{201 }
\DoxyCodeLine{202     glDeleteBuffers( 2, \_vbods );}
\DoxyCodeLine{203     glDeleteVertexArrays( 1, \&\_vaod );}
\DoxyCodeLine{204 \}}
\DoxyCodeLine{205 }
\DoxyCodeLine{206 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} CSCI441::ModelLoader::\_init() \{}
\DoxyCodeLine{207     \_hasVertexTexCoords = \textcolor{keyword}{false};}
\DoxyCodeLine{208     \_hasVertexNormals = \textcolor{keyword}{false};}
\DoxyCodeLine{209 }
\DoxyCodeLine{210     \_vertices = NULL;}
\DoxyCodeLine{211     \_texCoords = NULL;}
\DoxyCodeLine{212     \_normals = NULL;}
\DoxyCodeLine{213     \_indices = NULL;}
\DoxyCodeLine{214 }
\DoxyCodeLine{215     glGenVertexArrays( 1, \&\_vaod );}
\DoxyCodeLine{216     glGenBuffers( 2, \_vbods );}
\DoxyCodeLine{217 \}}
\DoxyCodeLine{218 }
\DoxyCodeLine{219 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a2ee2d1efb2279540d9d89885ed173ac0}{CSCI441::ModelLoader::loadModelFile}}( \textcolor{keyword}{const} \textcolor{keywordtype}{char}* filename, \textcolor{keywordtype}{bool} INFO, \textcolor{keywordtype}{bool} ERRORS ) \{}
\DoxyCodeLine{220     \textcolor{keywordtype}{bool} result = \textcolor{keyword}{true};}
\DoxyCodeLine{221     \_filename = (\textcolor{keywordtype}{char}*)malloc(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char})*strlen(filename));}
\DoxyCodeLine{222     strcpy( \_filename, filename );}
\DoxyCodeLine{223     \textcolor{keywordflow}{if}( strstr( \_filename, \textcolor{stringliteral}{"{}.obj"{}} ) != NULL ) \{}
\DoxyCodeLine{224         result = \_loadOBJFile( INFO, ERRORS );}
\DoxyCodeLine{225         \_modelType = CSCI441\_INTERNAL::OBJ;}
\DoxyCodeLine{226     \}}
\DoxyCodeLine{227     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( strstr( \_filename, \textcolor{stringliteral}{"{}.off"{}} ) != NULL ) \{}
\DoxyCodeLine{228         result = \_loadOFFFile( INFO, ERRORS );}
\DoxyCodeLine{229         \_modelType = CSCI441\_INTERNAL::OFF;}
\DoxyCodeLine{230     \}}
\DoxyCodeLine{231     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( strstr( \_filename, \textcolor{stringliteral}{"{}.ply"{}} ) != NULL ) \{}
\DoxyCodeLine{232         result = \_loadPLYFile( INFO, ERRORS );}
\DoxyCodeLine{233         \_modelType = CSCI441\_INTERNAL::PLY;}
\DoxyCodeLine{234     \}}
\DoxyCodeLine{235     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( strstr( \_filename, \textcolor{stringliteral}{"{}.stl"{}} ) != NULL ) \{}
\DoxyCodeLine{236         result = \_loadSTLFile( INFO, ERRORS );}
\DoxyCodeLine{237         \_modelType = CSCI441\_INTERNAL::STL;}
\DoxyCodeLine{238     \}}
\DoxyCodeLine{239     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{240         result = \textcolor{keyword}{false};}
\DoxyCodeLine{241         \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[ERROR]:  Unsupported file format for file: \%s\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{242     \}}
\DoxyCodeLine{243 }
\DoxyCodeLine{244     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{245 \}}
\DoxyCodeLine{246 }
\DoxyCodeLine{247 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a219e23f5fdc0efccb4a49138da240197}{CSCI441::ModelLoader::setAttributeLocations}}(GLint positionLocation, GLint normalLocation, GLint texCoordLocation)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{248     glBindVertexArray( \_vaod );}
\DoxyCodeLine{249     glBindBuffer( GL\_ARRAY\_BUFFER, \_vbods[0] );}
\DoxyCodeLine{250 }
\DoxyCodeLine{251     glEnableVertexAttribArray( positionLocation );}
\DoxyCodeLine{252     glVertexAttribPointer( positionLocation, 3, GL\_FLOAT, GL\_FALSE, 0, (\textcolor{keywordtype}{void}*)0 );}
\DoxyCodeLine{253 }
\DoxyCodeLine{254     glEnableVertexAttribArray( normalLocation );}
\DoxyCodeLine{255     glVertexAttribPointer( normalLocation, 3, GL\_FLOAT, GL\_FALSE, 0, (\textcolor{keywordtype}{void}*)(\textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3) );}
\DoxyCodeLine{256 }
\DoxyCodeLine{257     glEnableVertexAttribArray( texCoordLocation );}
\DoxyCodeLine{258     glVertexAttribPointer( texCoordLocation, 2, GL\_FLOAT, GL\_FALSE, 0, (\textcolor{keywordtype}{void}*)(\textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 6) );}
\DoxyCodeLine{259 \}}
\DoxyCodeLine{260 }
\DoxyCodeLine{261 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a8fb084faddc03520932564e627490654}{CSCI441::ModelLoader::draw}}( GLuint shaderProgramHandle,}
\DoxyCodeLine{262                                         GLint matDiffLocation, GLint matSpecLocation, GLint matShinLocation, GLint matAmbLocation,}
\DoxyCodeLine{263                                         GLenum diffuseTexture )\textcolor{keyword}{ const }\{}
\DoxyCodeLine{264     glBindVertexArray( \_vaod );}
\DoxyCodeLine{265 }
\DoxyCodeLine{266     \textcolor{keywordtype}{bool} result = \textcolor{keyword}{true};}
\DoxyCodeLine{267     \textcolor{keywordflow}{if}( \_modelType == CSCI441\_INTERNAL::OBJ ) \{}
\DoxyCodeLine{268         \textcolor{keywordflow}{for}( \textcolor{keyword}{auto} materialIter = \_materialIndexStartStop.begin();}
\DoxyCodeLine{269                         materialIter != \_materialIndexStartStop.end();}
\DoxyCodeLine{270                         materialIter++ ) \{}
\DoxyCodeLine{271 }
\DoxyCodeLine{272             std::string materialName = materialIter-\/>first;}
\DoxyCodeLine{273             std::vector< std::pair< GLuint, GLuint > > indexStartStop = materialIter-\/>second;}
\DoxyCodeLine{274 }
\DoxyCodeLine{275             \mbox{\hyperlink{struct_c_s_c_i441___i_n_t_e_r_n_a_l_1_1_model_material}{CSCI441\_INTERNAL::ModelMaterial}}* material = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{276             \textcolor{keywordflow}{if}( \_materials.find( materialName ) != \_materials.end() )}
\DoxyCodeLine{277                 material = \_materials.find( materialName )-\/>second;}
\DoxyCodeLine{278 }
\DoxyCodeLine{279             \textcolor{keywordflow}{for}( std::vector< std::pair< GLuint, GLuint > >::iterator idxIter = indexStartStop.begin();}
\DoxyCodeLine{280                             idxIter != indexStartStop.end();}
\DoxyCodeLine{281                             idxIter++ ) \{}
\DoxyCodeLine{282 }
\DoxyCodeLine{283                 GLuint start = idxIter-\/>first;}
\DoxyCodeLine{284                 GLuint end = idxIter-\/>second;}
\DoxyCodeLine{285                 GLuint length = end -\/ start + 1;}
\DoxyCodeLine{286 }
\DoxyCodeLine{287 \textcolor{comment}{//              printf( "{}rendering material \%s (\%u, \%u) = \%u\(\backslash\)n"{}, materialName.c\_str(), start, end, length );}}
\DoxyCodeLine{288 }
\DoxyCodeLine{289                 \textcolor{keywordflow}{if}( material != \textcolor{keyword}{nullptr} ) \{}
\DoxyCodeLine{290                     glProgramUniform4fv( shaderProgramHandle, matAmbLocation, 1, material-\/>ambient );}
\DoxyCodeLine{291                     glProgramUniform4fv( shaderProgramHandle, matDiffLocation, 1, material-\/>diffuse );}
\DoxyCodeLine{292                     glProgramUniform4fv( shaderProgramHandle, matSpecLocation, 1, material-\/>specular );}
\DoxyCodeLine{293                     glProgramUniform1f( shaderProgramHandle, matShinLocation, material-\/>shininess );}
\DoxyCodeLine{294 }
\DoxyCodeLine{295                     \textcolor{keywordflow}{if}( material-\/>map\_Kd != -\/1 ) \{}
\DoxyCodeLine{296                         glActiveTexture( diffuseTexture );}
\DoxyCodeLine{297                         glBindTexture( GL\_TEXTURE\_2D, material-\/>map\_Kd );}
\DoxyCodeLine{298                     \}}
\DoxyCodeLine{299                 \}}
\DoxyCodeLine{300 }
\DoxyCodeLine{301                 glDrawElements( GL\_TRIANGLES, length, GL\_UNSIGNED\_INT, (\textcolor{keywordtype}{void}*)(\textcolor{keyword}{sizeof}(GLuint)*start) );}
\DoxyCodeLine{302             \}}
\DoxyCodeLine{303         \}}
\DoxyCodeLine{304     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{305         glDrawElements( GL\_TRIANGLES, \_numIndices, GL\_UNSIGNED\_INT, (\textcolor{keywordtype}{void}*)0 );}
\DoxyCodeLine{306     \}}
\DoxyCodeLine{307 }
\DoxyCodeLine{308     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{309 \}}
\DoxyCodeLine{310 }
\DoxyCodeLine{311 \textcolor{keyword}{inline} GLuint \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_aae033d75ebda399f07ad10c71523de40}{CSCI441::ModelLoader::getNumberOfVertices}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \_uniqueIndex; \}}
\DoxyCodeLine{312 \textcolor{keyword}{inline} GLfloat* \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a5c2d76360ed4fb7b31bf49aa8d9e35c7}{CSCI441::ModelLoader::getVertices}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \_vertices; \}}
\DoxyCodeLine{313 \textcolor{keyword}{inline} GLfloat* \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a98b9c1bc899975fcbf0710a018b2c121}{CSCI441::ModelLoader::getTexCoords}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \_texCoords; \}}
\DoxyCodeLine{314 \textcolor{keyword}{inline} GLfloat* \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a8efabf9b18c039ee93367ab33d092b4e}{CSCI441::ModelLoader::getNormals}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \_normals; \}}
\DoxyCodeLine{315 \textcolor{keyword}{inline} GLuint \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a5adfe3130cc2b28713b72a58c5252bcc}{CSCI441::ModelLoader::getNumberOfIndices}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \_numIndices; \}}
\DoxyCodeLine{316 \textcolor{keyword}{inline} GLuint* \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a98736116c5ac6c2fc9b89b1b1b79923c}{CSCI441::ModelLoader::getIndices}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \_indices; \}}
\DoxyCodeLine{317 }
\DoxyCodeLine{318 \textcolor{comment}{// Read in a WaveFront *.obj File}}
\DoxyCodeLine{319 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} CSCI441::ModelLoader::\_loadOBJFile( \textcolor{keywordtype}{bool} INFO, \textcolor{keywordtype}{bool} ERRORS ) \{}
\DoxyCodeLine{320     \textcolor{keywordtype}{bool} result = \textcolor{keyword}{true};}
\DoxyCodeLine{321 }
\DoxyCodeLine{322     \textcolor{keywordflow}{if} (INFO ) printf( \textcolor{stringliteral}{"{}[.obj]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/ BEGIN \%s Info -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/ \(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{323 }
\DoxyCodeLine{324     time\_t start, end;}
\DoxyCodeLine{325     time(\&start);}
\DoxyCodeLine{326 }
\DoxyCodeLine{327     std::ifstream in( \_filename );}
\DoxyCodeLine{328     \textcolor{keywordflow}{if}( !in.is\_open() ) \{}
\DoxyCodeLine{329         \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.obj]: [ERROR]: Could not open \(\backslash\)"{}\%s\(\backslash\)"{}\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{330         \textcolor{keywordflow}{if} ( INFO ) printf( \textcolor{stringliteral}{"{}[.obj]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/ \(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{331         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{332     \}}
\DoxyCodeLine{333 }
\DoxyCodeLine{334     GLuint numObjects = 0, numGroups = 0;}
\DoxyCodeLine{335     GLuint numVertices = 0, numTexCoords = 0, numNormals = 0;}
\DoxyCodeLine{336     GLuint numFaces = 0, numTriangles = 0;}
\DoxyCodeLine{337     \textcolor{keywordtype}{double} minX = 999999, maxX = -\/999999, minY = 999999, maxY = -\/999999, minZ = 999999, maxZ = -\/999999;}
\DoxyCodeLine{338     std::string line;}
\DoxyCodeLine{339 }
\DoxyCodeLine{340     std::map<std::string, GLuint> uniqueCounts;}
\DoxyCodeLine{341     \_uniqueIndex = 0;}
\DoxyCodeLine{342 }
\DoxyCodeLine{343     \textcolor{keywordtype}{int} progressCounter = 0;}
\DoxyCodeLine{344 }
\DoxyCodeLine{345     \textcolor{keywordflow}{while}( getline( in, line ) ) \{}
\DoxyCodeLine{346         \textcolor{keywordflow}{if}( line.length() > 1 \&\& line.at(0) == \textcolor{charliteral}{'\(\backslash\)t'} )}
\DoxyCodeLine{347             line = line.substr( 1 );}
\DoxyCodeLine{348         line.erase( line.find\_last\_not\_of( \textcolor{stringliteral}{"{} \(\backslash\)n\(\backslash\)r\(\backslash\)t"{}} ) + 1 );}
\DoxyCodeLine{349 }
\DoxyCodeLine{350         std::vector< std::string > tokens = \_tokenizeString( line, \textcolor{stringliteral}{"{} \(\backslash\)t"{}} );}
\DoxyCodeLine{351         \textcolor{keywordflow}{if}( tokens.size() < 1 ) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{352 }
\DoxyCodeLine{353         \textcolor{comment}{//the line should have a single character that lets us know if it's a...}}
\DoxyCodeLine{354         \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}\#"{}} ) || tokens[0].find\_first\_of(\textcolor{stringliteral}{"{}\#"{}}) == 0 ) \{                              \textcolor{comment}{// comment ignore}}
\DoxyCodeLine{355         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}o"{}} ) ) \{                        \textcolor{comment}{// object name ignore}}
\DoxyCodeLine{356             numObjects++;}
\DoxyCodeLine{357         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}g"{}} ) ) \{                        \textcolor{comment}{// polygon group name ignore}}
\DoxyCodeLine{358             numGroups++;}
\DoxyCodeLine{359         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}mtllib"{}} ) ) \{                   \textcolor{comment}{// material library}}
\DoxyCodeLine{360             \_loadMTLFile( tokens[1].c\_str(), INFO, ERRORS );}
\DoxyCodeLine{361         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}v"{}} ) ) \{                        \textcolor{comment}{//vertex}}
\DoxyCodeLine{362             numVertices++;}
\DoxyCodeLine{363 }
\DoxyCodeLine{364             \textcolor{keywordtype}{double} x = atof( tokens[1].c\_str() ),}
\DoxyCodeLine{365                      y = atof( tokens[2].c\_str() ),}
\DoxyCodeLine{366                      z = atof( tokens[3].c\_str() );}
\DoxyCodeLine{367 }
\DoxyCodeLine{368             \textcolor{keywordflow}{if}( x < minX ) minX = x;}
\DoxyCodeLine{369             \textcolor{keywordflow}{if}( x > maxX ) maxX = x;}
\DoxyCodeLine{370             \textcolor{keywordflow}{if}( y < minY ) minY = y;}
\DoxyCodeLine{371             \textcolor{keywordflow}{if}( y > maxY ) maxY = y;}
\DoxyCodeLine{372             \textcolor{keywordflow}{if}( z < minZ ) minZ = z;}
\DoxyCodeLine{373             \textcolor{keywordflow}{if}( z > maxZ ) maxZ = z;}
\DoxyCodeLine{374         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens.at(0).compare( \textcolor{stringliteral}{"{}vn"{}} ) ) \{                    \textcolor{comment}{//vertex normal}}
\DoxyCodeLine{375             numNormals++;}
\DoxyCodeLine{376         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens.at(0).compare( \textcolor{stringliteral}{"{}vt"{}} ) ) \{                    \textcolor{comment}{//vertex tex coord}}
\DoxyCodeLine{377             numTexCoords++;}
\DoxyCodeLine{378         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens.at(0).compare( \textcolor{stringliteral}{"{}f"{}} ) ) \{                     \textcolor{comment}{//face!}}
\DoxyCodeLine{379 }
\DoxyCodeLine{380             \textcolor{comment}{//now, faces can be either quads or triangles (or maybe more?)}}
\DoxyCodeLine{381             \textcolor{comment}{//split the string on spaces to get the number of verts+attrs.}}
\DoxyCodeLine{382             std::vector<std::string> faceTokens = \_tokenizeString(line, \textcolor{stringliteral}{"{} "{}});}
\DoxyCodeLine{383 }
\DoxyCodeLine{384             \textcolor{keywordflow}{for}(GLuint i = 1; i < faceTokens.size(); i++) \{}
\DoxyCodeLine{385                 \textcolor{comment}{//need to use both the tokens and number of slashes to determine what info is there.}}
\DoxyCodeLine{386                 std::vector<std::string> groupTokens = \_tokenizeString(faceTokens[i], \textcolor{stringliteral}{"{}/"{}});}
\DoxyCodeLine{387                 \textcolor{keywordtype}{int} numSlashes = 0;}
\DoxyCodeLine{388                 \textcolor{keywordflow}{for}( GLuint j = 0; j < faceTokens[i].length(); j++ ) \{}
\DoxyCodeLine{389                     \textcolor{keywordflow}{if}(faceTokens[i][j] == \textcolor{charliteral}{'/'}) numSlashes++;}
\DoxyCodeLine{390                 \}}
\DoxyCodeLine{391 }
\DoxyCodeLine{392                 std::stringstream currentFaceTokenStream;}
\DoxyCodeLine{393                 \textcolor{keywordtype}{int} v = atoi(groupTokens[0].c\_str());}
\DoxyCodeLine{394                 \textcolor{keywordflow}{if}(v < 0)}
\DoxyCodeLine{395                     v = numVertices + v + 1;}
\DoxyCodeLine{396                 currentFaceTokenStream << v;}
\DoxyCodeLine{397 }
\DoxyCodeLine{398                 \textcolor{comment}{//based on combination of number of tokens and slashes, we can determine what we have.}}
\DoxyCodeLine{399                 \textcolor{keywordflow}{if}(groupTokens.size() == 2 \&\& numSlashes == 1) \{}
\DoxyCodeLine{400                     \_hasVertexTexCoords = \textcolor{keyword}{true};}
\DoxyCodeLine{401 }
\DoxyCodeLine{402                     \textcolor{keywordtype}{int} vt = atoi(groupTokens[1].c\_str());}
\DoxyCodeLine{403                     \textcolor{keywordflow}{if}(vt < 0)}
\DoxyCodeLine{404                         vt = numTexCoords + vt + 1;}
\DoxyCodeLine{405                     currentFaceTokenStream << \textcolor{stringliteral}{"{}/"{}} << vt;}
\DoxyCodeLine{406                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(groupTokens.size() == 2 \&\& numSlashes == 2) \{}
\DoxyCodeLine{407                     \_hasVertexNormals = \textcolor{keyword}{true};}
\DoxyCodeLine{408 }
\DoxyCodeLine{409                     \textcolor{keywordtype}{int} vn = atoi(groupTokens[1].c\_str());}
\DoxyCodeLine{410                     \textcolor{keywordflow}{if}(vn < 0)}
\DoxyCodeLine{411                         vn = numNormals + vn + 1;}
\DoxyCodeLine{412                     currentFaceTokenStream << \textcolor{stringliteral}{"{}//"{}} << vn;}
\DoxyCodeLine{413                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(groupTokens.size() == 3) \{}
\DoxyCodeLine{414                     \_hasVertexTexCoords = \textcolor{keyword}{true};}
\DoxyCodeLine{415                     \_hasVertexNormals = \textcolor{keyword}{true};}
\DoxyCodeLine{416 }
\DoxyCodeLine{417                     \textcolor{keywordtype}{int} vt = atoi(groupTokens[1].c\_str());}
\DoxyCodeLine{418                     \textcolor{keywordflow}{if}(vt < 0)}
\DoxyCodeLine{419                         vt = numTexCoords + vt + 1;}
\DoxyCodeLine{420                     \textcolor{keywordtype}{int} vn = atoi(groupTokens[2].c\_str());}
\DoxyCodeLine{421                     \textcolor{keywordflow}{if}(vn < 0)}
\DoxyCodeLine{422                         vn = numNormals + vn + 1;}
\DoxyCodeLine{423                     currentFaceTokenStream << \textcolor{stringliteral}{"{}/"{}} << vt << \textcolor{stringliteral}{"{}/"{}} << vn;}
\DoxyCodeLine{424                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(groupTokens.size() != 1) \{}
\DoxyCodeLine{425                     \textcolor{keywordflow}{if} (ERRORS) fprintf(stderr, \textcolor{stringliteral}{"{}[.obj]: [ERROR]: Malformed OBJ file, \%s.\(\backslash\)n"{}}, \_filename);}
\DoxyCodeLine{426                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{427                 \}}
\DoxyCodeLine{428 }
\DoxyCodeLine{429                 std::string processedFaceToken = currentFaceTokenStream.str();}
\DoxyCodeLine{430                 \textcolor{keywordflow}{if}( uniqueCounts.find( processedFaceToken ) == uniqueCounts.end() ) \{}
\DoxyCodeLine{431                     uniqueCounts.insert( std::pair<std::string,long int>(processedFaceToken,\_uniqueIndex) );}
\DoxyCodeLine{432                     \_uniqueIndex++;}
\DoxyCodeLine{433                 \}}
\DoxyCodeLine{434             \}}
\DoxyCodeLine{435 }
\DoxyCodeLine{436             numTriangles += (faceTokens.size() -\/ 1 -\/ 3 + 1);}
\DoxyCodeLine{437 }
\DoxyCodeLine{438             numFaces++;}
\DoxyCodeLine{439         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{440 }
\DoxyCodeLine{441         \}}
\DoxyCodeLine{442 }
\DoxyCodeLine{443         \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{444             progressCounter++;}
\DoxyCodeLine{445             \textcolor{keywordflow}{if}( progressCounter \% 5000 == 0 ) \{}
\DoxyCodeLine{446                 printf(\textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}});}
\DoxyCodeLine{447                 \textcolor{keywordflow}{switch}( progressCounter ) \{}
\DoxyCodeLine{448                     \textcolor{keywordflow}{case} 5000:  printf(\textcolor{stringliteral}{"{}[.obj]: scanning \%s...\(\backslash\)\(\backslash\)"{}}, \_filename);  \textcolor{keywordflow}{break};}
\DoxyCodeLine{449                     \textcolor{keywordflow}{case} 10000: printf(\textcolor{stringliteral}{"{}[.obj]: scanning \%s...|"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{450                     \textcolor{keywordflow}{case} 15000: printf(\textcolor{stringliteral}{"{}[.obj]: scanning \%s.../"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{451                     \textcolor{keywordflow}{case} 20000: printf(\textcolor{stringliteral}{"{}[.obj]: scanning \%s...-\/"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{452                 \}}
\DoxyCodeLine{453                 fflush(stdout);}
\DoxyCodeLine{454             \}}
\DoxyCodeLine{455             \textcolor{keywordflow}{if}( progressCounter == 20000 )}
\DoxyCodeLine{456                 progressCounter = 0;}
\DoxyCodeLine{457         \}}
\DoxyCodeLine{458     \}}
\DoxyCodeLine{459     in.close();}
\DoxyCodeLine{460 }
\DoxyCodeLine{461     \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{462         printf( \textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}} );}
\DoxyCodeLine{463         printf( \textcolor{stringliteral}{"{}[.obj]: scanning \%s...done!\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{464         printf( \textcolor{stringliteral}{"{}[.obj]: -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}} );}
\DoxyCodeLine{465         printf( \textcolor{stringliteral}{"{}[.obj]: Model Stats:\(\backslash\)n"{}} );}
\DoxyCodeLine{466         printf( \textcolor{stringliteral}{"{}[.obj]: Vertices:  \(\backslash\)t\%u\(\backslash\)tNormals:  \(\backslash\)t\%u\(\backslash\)tTex Coords:\(\backslash\)t\%u\(\backslash\)n"{}}, numVertices, numNormals, numTexCoords );}
\DoxyCodeLine{467         printf( \textcolor{stringliteral}{"{}[.obj]: Unique Verts:\(\backslash\)t\%u\(\backslash\)n"{}}, \_uniqueIndex );}
\DoxyCodeLine{468         printf( \textcolor{stringliteral}{"{}[.obj]: Faces:     \(\backslash\)t\%u\(\backslash\)tTriangles:\(\backslash\)t\%u\(\backslash\)n"{}}, numFaces, numTriangles );}
\DoxyCodeLine{469         printf( \textcolor{stringliteral}{"{}[.obj]: Objects:   \(\backslash\)t\%u\(\backslash\)tGroups:   \(\backslash\)t\%u\(\backslash\)n"{}}, numObjects, numGroups );}
\DoxyCodeLine{470         printf( \textcolor{stringliteral}{"{}[.obj]: Dimensions:\(\backslash\)t(\%f, \%f, \%f)\(\backslash\)n"{}}, (maxX -\/ minX), (maxY -\/ minY), (maxZ -\/ minZ) );}
\DoxyCodeLine{471     \}}
\DoxyCodeLine{472 }
\DoxyCodeLine{473     \textcolor{keywordflow}{if}( \_hasVertexNormals || !AUTO\_GEN\_NORMALS ) \{}
\DoxyCodeLine{474         \textcolor{keywordflow}{if} (INFO \&\& !\_hasVertexNormals)}
\DoxyCodeLine{475             printf( \textcolor{stringliteral}{"{}[.obj]: [WARN]: No vertex normals exist on model.  To autogenerate vertex\(\backslash\)n\(\backslash\)tnormals, call CSCI441::ModelLoader::enableAutoGenerateNormals()\(\backslash\)n\(\backslash\)tprior to loading the model file.\(\backslash\)n"{}} );}
\DoxyCodeLine{476         \_vertices = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3);}
\DoxyCodeLine{477         \_texCoords = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 2);}
\DoxyCodeLine{478         \_normals = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3);}
\DoxyCodeLine{479         \_indices = (GLuint*)malloc(\textcolor{keyword}{sizeof}(GLuint) * numTriangles * 3);}
\DoxyCodeLine{480     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{481         \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.obj]: No vertex normals exist on model, vertex normals will be autogenerated\(\backslash\)n"{}} );}
\DoxyCodeLine{482         \_vertices = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numTriangles * 3 * 3);}
\DoxyCodeLine{483         \_texCoords = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numTriangles * 3 * 2);}
\DoxyCodeLine{484         \_normals = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numTriangles * 3 * 3);}
\DoxyCodeLine{485         \_indices = (GLuint*)malloc(\textcolor{keyword}{sizeof}(GLuint) * numTriangles * 3);}
\DoxyCodeLine{486     \}}
\DoxyCodeLine{487 }
\DoxyCodeLine{488     GLfloat* v = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numVertices * 3);}
\DoxyCodeLine{489     GLfloat* vt = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numTexCoords * 2);}
\DoxyCodeLine{490     GLfloat* vn = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numNormals * 3);}
\DoxyCodeLine{491 }
\DoxyCodeLine{492     std::vector<GLfloat> vertsTemp;}
\DoxyCodeLine{493     std::vector<GLfloat> texCoordsTemp;}
\DoxyCodeLine{494 }
\DoxyCodeLine{495     printf( \textcolor{stringliteral}{"{}[.obj]: -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}} );}
\DoxyCodeLine{496 }
\DoxyCodeLine{497     uniqueCounts.clear();}
\DoxyCodeLine{498     \_uniqueIndex = 0;}
\DoxyCodeLine{499     \_numIndices = 0;}
\DoxyCodeLine{500 }
\DoxyCodeLine{501     in.open( \_filename );}
\DoxyCodeLine{502 }
\DoxyCodeLine{503     GLuint vSeen = 0, vtSeen = 0, vnSeen = 0, indicesSeen = 0;}
\DoxyCodeLine{504     GLuint uniqueV = 0;}
\DoxyCodeLine{505 }
\DoxyCodeLine{506     std::string currentMaterial = \textcolor{stringliteral}{"{}default"{}};}
\DoxyCodeLine{507     \_materialIndexStartStop.insert( std::pair< std::string, std::vector< std::pair< GLuint, GLuint > > >( currentMaterial, std::vector< std::pair< GLuint, GLuint > >(1) ) );}
\DoxyCodeLine{508     \_materialIndexStartStop.find( currentMaterial )-\/>second.back().first = indicesSeen;}
\DoxyCodeLine{509 }
\DoxyCodeLine{510     \textcolor{keywordflow}{while}( getline( in, line ) ) \{}
\DoxyCodeLine{511         \textcolor{keywordflow}{if}( line.length() > 1 \&\& line.at(0) == \textcolor{charliteral}{'\(\backslash\)t'} )}
\DoxyCodeLine{512             line = line.substr( 1 );}
\DoxyCodeLine{513         line.erase( line.find\_last\_not\_of( \textcolor{stringliteral}{"{} \(\backslash\)n\(\backslash\)r\(\backslash\)t"{}} ) + 1 );}
\DoxyCodeLine{514 }
\DoxyCodeLine{515         std::vector< std::string > tokens = \_tokenizeString( line, \textcolor{stringliteral}{"{} \(\backslash\)t"{}} );}
\DoxyCodeLine{516         \textcolor{keywordflow}{if}( tokens.size() < 1 ) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{517 }
\DoxyCodeLine{518         \textcolor{comment}{//the line should have a single character that lets us know if it's a...}}
\DoxyCodeLine{519         \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}\#"{}} ) || tokens[0].find\_first\_of(\textcolor{stringliteral}{"{}\#"{}}) == 0 ) \{                              \textcolor{comment}{// comment ignore}}
\DoxyCodeLine{520         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}o"{}} ) ) \{                        \textcolor{comment}{// object name ignore}}
\DoxyCodeLine{521 }
\DoxyCodeLine{522         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}g"{}} ) ) \{                        \textcolor{comment}{// polygon group name ignore}}
\DoxyCodeLine{523 }
\DoxyCodeLine{524         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}mtllib"{}} ) ) \{                   \textcolor{comment}{// material library}}
\DoxyCodeLine{525 }
\DoxyCodeLine{526         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}usemtl"{}} ) ) \{                   \textcolor{comment}{// use material library}}
\DoxyCodeLine{527             \textcolor{keywordflow}{if}( currentMaterial == \textcolor{stringliteral}{"{}default"{}} \&\& indicesSeen == 0 ) \{}
\DoxyCodeLine{528                 \_materialIndexStartStop.clear();}
\DoxyCodeLine{529             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{530                 \_materialIndexStartStop.find( currentMaterial )-\/>second.back().second = indicesSeen -\/ 1;}
\DoxyCodeLine{531             \}}
\DoxyCodeLine{532             currentMaterial = tokens[1];}
\DoxyCodeLine{533             \textcolor{keywordflow}{if}( \_materialIndexStartStop.find( currentMaterial ) == \_materialIndexStartStop.end() ) \{}
\DoxyCodeLine{534                 \_materialIndexStartStop.insert( std::pair< std::string, std::vector< std::pair< GLuint, GLuint > > >( currentMaterial, std::vector< std::pair< GLuint, GLuint > >(1) ) );}
\DoxyCodeLine{535                 \_materialIndexStartStop.find( currentMaterial )-\/>second.back().first = indicesSeen;}
\DoxyCodeLine{536             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{537                 \_materialIndexStartStop.find( currentMaterial )-\/>second.push\_back( std::pair< GLuint, GLuint >( indicesSeen, -\/1 ) );}
\DoxyCodeLine{538             \}}
\DoxyCodeLine{539         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}s"{}} ) ) \{                        \textcolor{comment}{// smooth shading}}
\DoxyCodeLine{540 }
\DoxyCodeLine{541         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}v"{}} ) ) \{                        \textcolor{comment}{//vertex}}
\DoxyCodeLine{542             \textcolor{keywordtype}{double} x = atof( tokens[1].c\_str() ),}
\DoxyCodeLine{543                      y = atof( tokens[2].c\_str() ),}
\DoxyCodeLine{544                      z = atof( tokens[3].c\_str() );}
\DoxyCodeLine{545 }
\DoxyCodeLine{546             v[vSeen*3 + 0] = x;}
\DoxyCodeLine{547             v[vSeen*3 + 1] = y;}
\DoxyCodeLine{548             v[vSeen*3 + 2] = z;}
\DoxyCodeLine{549 }
\DoxyCodeLine{550             vSeen++;}
\DoxyCodeLine{551         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens.at(0).compare( \textcolor{stringliteral}{"{}vn"{}} ) ) \{                    \textcolor{comment}{//vertex normal}}
\DoxyCodeLine{552             \textcolor{keywordtype}{double} x = atof( tokens[1].c\_str() ),}
\DoxyCodeLine{553                      y = atof( tokens[2].c\_str() ),}
\DoxyCodeLine{554                      z = atof( tokens[3].c\_str() );}
\DoxyCodeLine{555 }
\DoxyCodeLine{556             vn[vnSeen*3 + 0] = x;}
\DoxyCodeLine{557             vn[vnSeen*3 + 1] = y;}
\DoxyCodeLine{558             vn[vnSeen*3 + 2] = z;}
\DoxyCodeLine{559 }
\DoxyCodeLine{560             vnSeen++;}
\DoxyCodeLine{561         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens.at(0).compare( \textcolor{stringliteral}{"{}vt"{}} ) ) \{                    \textcolor{comment}{//vertex tex coord}}
\DoxyCodeLine{562             \textcolor{keywordtype}{double} s = atof( tokens[1].c\_str() ),}
\DoxyCodeLine{563                          t = atof( tokens[2].c\_str() );}
\DoxyCodeLine{564 }
\DoxyCodeLine{565           vt[vtSeen*2 + 0] = s;}
\DoxyCodeLine{566             vt[vtSeen*2 + 1] = t;}
\DoxyCodeLine{567 }
\DoxyCodeLine{568             vtSeen++;}
\DoxyCodeLine{569         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens.at(0).compare( \textcolor{stringliteral}{"{}f"{}} ) ) \{                     \textcolor{comment}{//face!}}
\DoxyCodeLine{570 }
\DoxyCodeLine{571             \textcolor{comment}{//now, faces can be either quads or triangles (or maybe more?)}}
\DoxyCodeLine{572             \textcolor{comment}{//split the string on spaces to get the number of verts+attrs.}}
\DoxyCodeLine{573             std::vector<std::string> faceTokens = \_tokenizeString(line, \textcolor{stringliteral}{"{} "{}});}
\DoxyCodeLine{574             std::vector<std::string> processedFaceTokens;}
\DoxyCodeLine{575 }
\DoxyCodeLine{576             \textcolor{keywordflow}{for}(GLuint i = 1; i < faceTokens.size(); i++) \{}
\DoxyCodeLine{577                 \textcolor{comment}{//need to use both the tokens and number of slashes to determine what info is there.}}
\DoxyCodeLine{578                 std::vector<std::string> groupTokens = \_tokenizeString(faceTokens[i], \textcolor{stringliteral}{"{}/"{}});}
\DoxyCodeLine{579                 \textcolor{keywordtype}{int} numSlashes = 0;}
\DoxyCodeLine{580                 \textcolor{keywordflow}{for}( GLuint j = 0; j < faceTokens[i].length(); j++ ) \{}
\DoxyCodeLine{581                     \textcolor{keywordflow}{if}(faceTokens[i][j] == \textcolor{charliteral}{'/'}) numSlashes++;}
\DoxyCodeLine{582                 \}}
\DoxyCodeLine{583 }
\DoxyCodeLine{584                 std::stringstream currentFaceTokenStream;}
\DoxyCodeLine{585                 \textcolor{keywordtype}{int} vx = atoi(groupTokens[0].c\_str());}
\DoxyCodeLine{586                 \textcolor{keywordflow}{if}(vx < 0)}
\DoxyCodeLine{587                     vx = vSeen + vx + 1;}
\DoxyCodeLine{588                 currentFaceTokenStream << vx;}
\DoxyCodeLine{589 }
\DoxyCodeLine{590                 \textcolor{comment}{//based on combination of number of tokens and slashes, we can determine what we have.}}
\DoxyCodeLine{591                 \textcolor{keywordflow}{if}(groupTokens.size() == 2 \&\& numSlashes == 1) \{}
\DoxyCodeLine{592                     \_hasVertexTexCoords = \textcolor{keyword}{true};}
\DoxyCodeLine{593 }
\DoxyCodeLine{594                     \textcolor{keywordtype}{int} vtx = atoi(groupTokens[1].c\_str());}
\DoxyCodeLine{595                     \textcolor{keywordflow}{if}(vtx < 0)}
\DoxyCodeLine{596                         vtx = vtSeen + vtx + 1;}
\DoxyCodeLine{597                     currentFaceTokenStream << \textcolor{stringliteral}{"{}/"{}} << vtx;}
\DoxyCodeLine{598                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(groupTokens.size() == 2 \&\& numSlashes == 2) \{}
\DoxyCodeLine{599                     \_hasVertexNormals = \textcolor{keyword}{true};}
\DoxyCodeLine{600 }
\DoxyCodeLine{601                     \textcolor{keywordtype}{int} vnx = atoi(groupTokens[1].c\_str());}
\DoxyCodeLine{602                     \textcolor{keywordflow}{if}(vnx < 0)}
\DoxyCodeLine{603                         vnx = vnSeen + vnx + 1;}
\DoxyCodeLine{604                     currentFaceTokenStream << \textcolor{stringliteral}{"{}//"{}} << vnx;}
\DoxyCodeLine{605                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(groupTokens.size() == 3) \{}
\DoxyCodeLine{606                     \_hasVertexTexCoords = \textcolor{keyword}{true};}
\DoxyCodeLine{607                     \_hasVertexNormals = \textcolor{keyword}{true};}
\DoxyCodeLine{608 }
\DoxyCodeLine{609                     \textcolor{keywordtype}{int} vtx = atoi(groupTokens[1].c\_str());}
\DoxyCodeLine{610                     \textcolor{keywordflow}{if}(vtx < 0)}
\DoxyCodeLine{611                         vtx = vtSeen + vtx + 1;}
\DoxyCodeLine{612                     \textcolor{keywordtype}{int} vnx = atoi(groupTokens[2].c\_str());}
\DoxyCodeLine{613                     \textcolor{keywordflow}{if}(vnx < 0)}
\DoxyCodeLine{614                         vnx = vnSeen + vnx + 1;}
\DoxyCodeLine{615                     currentFaceTokenStream << \textcolor{stringliteral}{"{}/"{}} << vtx << \textcolor{stringliteral}{"{}/"{}} << vnx;}
\DoxyCodeLine{616                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(groupTokens.size() != 1) \{}
\DoxyCodeLine{617                     \textcolor{keywordflow}{if} (ERRORS) fprintf(stderr, \textcolor{stringliteral}{"{}[.obj]: [ERROR]: Malformed OBJ file, \%s.\(\backslash\)n"{}}, \_filename);}
\DoxyCodeLine{618                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{619                 \}}
\DoxyCodeLine{620 }
\DoxyCodeLine{621                 std::string processedFaceToken = currentFaceTokenStream.str();}
\DoxyCodeLine{622                 processedFaceTokens.push\_back(processedFaceToken);}
\DoxyCodeLine{623 }
\DoxyCodeLine{624                 \textcolor{keywordflow}{if}( uniqueCounts.find( processedFaceToken ) == uniqueCounts.end() ) \{}
\DoxyCodeLine{625                     uniqueCounts.insert( std::pair<std::string,unsigned long int>(processedFaceToken,uniqueV) );}
\DoxyCodeLine{626 }
\DoxyCodeLine{627                     \textcolor{comment}{//need to use both the tokens and number of slashes to determine what info is there.}}
\DoxyCodeLine{628                     std::vector<std::string> groupTokens = \_tokenizeString(processedFaceToken, \textcolor{stringliteral}{"{}/"{}});}
\DoxyCodeLine{629                     \textcolor{keywordtype}{int} numSlashes = 0;}
\DoxyCodeLine{630                     \textcolor{keywordflow}{for}( GLuint j = 0; j < processedFaceToken.length(); j++ ) \{}
\DoxyCodeLine{631                         \textcolor{keywordflow}{if}(processedFaceToken[j] == \textcolor{charliteral}{'/'}) numSlashes++;}
\DoxyCodeLine{632                     \}}
\DoxyCodeLine{633 }
\DoxyCodeLine{634                     \textcolor{keywordflow}{if}( \_hasVertexNormals || !AUTO\_GEN\_NORMALS ) \{}
\DoxyCodeLine{635                         \textcolor{comment}{//regardless, we always get a vertex index.}}
\DoxyCodeLine{636                         \textcolor{keywordtype}{int} vI = atoi(groupTokens[0].c\_str());}
\DoxyCodeLine{637                         \textcolor{keywordflow}{if}( vI < 0 )}
\DoxyCodeLine{638                             vI = vSeen + vI + 1;}
\DoxyCodeLine{639 }
\DoxyCodeLine{640                         \_vertices[ \_uniqueIndex*3 + 0 ] = v[ ((vI -\/ 1) * 3) + 0 ];}
\DoxyCodeLine{641                         \_vertices[ \_uniqueIndex*3 + 1 ] = v[ ((vI -\/ 1) * 3) + 1 ];}
\DoxyCodeLine{642                         \_vertices[ \_uniqueIndex*3 + 2 ] = v[ ((vI -\/ 1) * 3) + 2 ];}
\DoxyCodeLine{643 }
\DoxyCodeLine{644                         \textcolor{comment}{//based on combination of number of tokens and slashes, we can determine what we have.}}
\DoxyCodeLine{645                         \textcolor{keywordflow}{if}(groupTokens.size() == 2 \&\& numSlashes == 1) \{}
\DoxyCodeLine{646                             \textcolor{keywordtype}{int} vtI = atoi(groupTokens[1].c\_str());}
\DoxyCodeLine{647                             \textcolor{keywordflow}{if}( vtI < 0 )}
\DoxyCodeLine{648                                 vtI = vtSeen + vtI + 1;}
\DoxyCodeLine{649 }
\DoxyCodeLine{650                             \_texCoords[ \_uniqueIndex*2 + 0 ] = vt[ ((vtI -\/ 1) * 2) + 0 ];}
\DoxyCodeLine{651                             \_texCoords[ \_uniqueIndex*2 + 1 ] = vt[ ((vtI -\/ 1) * 2) + 1 ];}
\DoxyCodeLine{652                         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(groupTokens.size() == 2 \&\& numSlashes == 2) \{}
\DoxyCodeLine{653                             \textcolor{keywordtype}{int} vnI = atoi(groupTokens[1].c\_str());}
\DoxyCodeLine{654                             \textcolor{keywordflow}{if}( vnI < 0 )}
\DoxyCodeLine{655                                 vnI = vnSeen + vnI + 1;}
\DoxyCodeLine{656 }
\DoxyCodeLine{657                             \_normals[ \_uniqueIndex*3 + 0 ] = vn[ ((vnI -\/ 1) * 3) + 0 ];}
\DoxyCodeLine{658                             \_normals[ \_uniqueIndex*3 + 1 ] = vn[ ((vnI -\/ 1) * 3) + 1 ];}
\DoxyCodeLine{659                             \_normals[ \_uniqueIndex*3 + 2 ] = vn[ ((vnI -\/ 1) * 3) + 2 ];}
\DoxyCodeLine{660                         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(groupTokens.size() == 3) \{}
\DoxyCodeLine{661                             \textcolor{keywordtype}{int} vtI = atoi(groupTokens[1].c\_str());}
\DoxyCodeLine{662                             \textcolor{keywordflow}{if}( vtI < 0 )}
\DoxyCodeLine{663                                 vtI = vtSeen + vtI + 1;}
\DoxyCodeLine{664 }
\DoxyCodeLine{665                             \_texCoords[ \_uniqueIndex*2 + 0 ] = vt[ ((vtI -\/ 1) * 2) + 0 ];}
\DoxyCodeLine{666                             \_texCoords[ \_uniqueIndex*2 + 1 ] = vt[ ((vtI -\/ 1) * 2) + 1 ];}
\DoxyCodeLine{667 }
\DoxyCodeLine{668                             \textcolor{keywordtype}{int} vnI = atoi(groupTokens[2].c\_str());}
\DoxyCodeLine{669                             \textcolor{keywordflow}{if}( vnI < 0 )}
\DoxyCodeLine{670                                 vnI = vnSeen + vnI + 1;}
\DoxyCodeLine{671 }
\DoxyCodeLine{672                             \_normals[ \_uniqueIndex*3 + 0 ] = vn[ ((vnI -\/ 1) * 3) + 0 ];}
\DoxyCodeLine{673                             \_normals[ \_uniqueIndex*3 + 1 ] = vn[ ((vnI -\/ 1) * 3) + 1 ];}
\DoxyCodeLine{674                             \_normals[ \_uniqueIndex*3 + 2 ] = vn[ ((vnI -\/ 1) * 3) + 2 ];}
\DoxyCodeLine{675                         \}}
\DoxyCodeLine{676 }
\DoxyCodeLine{677                         \_uniqueIndex++;}
\DoxyCodeLine{678                     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{679                         \textcolor{comment}{//regardless, we always get a vertex index.}}
\DoxyCodeLine{680                         \textcolor{keywordtype}{int} vI = atoi(groupTokens[0].c\_str());}
\DoxyCodeLine{681                         \textcolor{keywordflow}{if}( vI < 0 )}
\DoxyCodeLine{682                             vI = vSeen + vI + 1;}
\DoxyCodeLine{683 }
\DoxyCodeLine{684                         vertsTemp.push\_back( v[ ((vI -\/ 1) * 3) + 0 ] );}
\DoxyCodeLine{685                         vertsTemp.push\_back( v[ ((vI -\/ 1) * 3) + 1 ] );}
\DoxyCodeLine{686                         vertsTemp.push\_back( v[ ((vI -\/ 1) * 3) + 2 ] );}
\DoxyCodeLine{687 }
\DoxyCodeLine{688                         \textcolor{comment}{//based on combination of number of tokens and slashes, we can determine what we have.}}
\DoxyCodeLine{689                         \textcolor{keywordflow}{if}(groupTokens.size() == 2 \&\& numSlashes == 1) \{}
\DoxyCodeLine{690                             \textcolor{keywordtype}{int} vtI = atoi(groupTokens[1].c\_str());}
\DoxyCodeLine{691                             \textcolor{keywordflow}{if}( vtI < 0 )}
\DoxyCodeLine{692                                 vtI = vtSeen + vtI + 1;}
\DoxyCodeLine{693 }
\DoxyCodeLine{694                             texCoordsTemp.push\_back( vt[ ((vtI -\/ 1) * 2) + 0 ] );}
\DoxyCodeLine{695                             texCoordsTemp.push\_back( vt[ ((vtI -\/ 1) * 2) + 1 ] );}
\DoxyCodeLine{696                         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(groupTokens.size() == 2 \&\& numSlashes == 2) \{}
\DoxyCodeLine{697                             \textcolor{comment}{// should not occur if no normals}}
\DoxyCodeLine{698                             \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.obj]: [WARN]: no vertex normals were specified, should not be trying to access values\(\backslash\)n"{}} );}
\DoxyCodeLine{699                         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(groupTokens.size() == 3) \{}
\DoxyCodeLine{700                             \textcolor{keywordtype}{int} vtI = atoi(groupTokens[1].c\_str());}
\DoxyCodeLine{701                             \textcolor{keywordflow}{if}( vtI < 0 )}
\DoxyCodeLine{702                                 vtI = vtSeen + vtI + 1;}
\DoxyCodeLine{703 }
\DoxyCodeLine{704                             texCoordsTemp.push\_back( vt[ ((vtI -\/ 1) * 2) + 0 ] );}
\DoxyCodeLine{705                             texCoordsTemp.push\_back( vt[ ((vtI -\/ 1) * 2) + 1 ] );}
\DoxyCodeLine{706 }
\DoxyCodeLine{707                             \textcolor{comment}{// should not occur if no normals}}
\DoxyCodeLine{708                             \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.obj]: [WARN]: no vertex normals were specified, should not be trying to access values\(\backslash\)n"{}} );}
\DoxyCodeLine{709                         \}}
\DoxyCodeLine{710                     \}}
\DoxyCodeLine{711                     uniqueV++;}
\DoxyCodeLine{712                 \}}
\DoxyCodeLine{713             \}}
\DoxyCodeLine{714 }
\DoxyCodeLine{715             \textcolor{keywordflow}{for}(GLuint i = 1; i < processedFaceTokens.size()-\/1; i++) \{}
\DoxyCodeLine{716                 \textcolor{keywordflow}{if}( \_hasVertexNormals || !AUTO\_GEN\_NORMALS ) \{}
\DoxyCodeLine{717                     \_indices[ indicesSeen++ ] = uniqueCounts.find( processedFaceTokens[0]   )-\/>second;}
\DoxyCodeLine{718                     \_indices[ indicesSeen++ ] = uniqueCounts.find( processedFaceTokens[i]   )-\/>second;}
\DoxyCodeLine{719                     \_indices[ indicesSeen++ ] = uniqueCounts.find( processedFaceTokens[i+1] )-\/>second;}
\DoxyCodeLine{720 }
\DoxyCodeLine{721                     \_numIndices += 3;}
\DoxyCodeLine{722                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{723                     \textcolor{keywordtype}{int} aI = uniqueCounts.find( processedFaceTokens[0]   )-\/>second;}
\DoxyCodeLine{724                     \textcolor{keywordtype}{int} bI = uniqueCounts.find( processedFaceTokens[i]   )-\/>second;}
\DoxyCodeLine{725                     \textcolor{keywordtype}{int} cI = uniqueCounts.find( processedFaceTokens[i+1] )-\/>second;}
\DoxyCodeLine{726 }
\DoxyCodeLine{727                     glm::vec3 a( vertsTemp[aI*3 + 0], vertsTemp[aI*3 + 1], vertsTemp[aI*3 + 2] );}
\DoxyCodeLine{728                     glm::vec3 b( vertsTemp[bI*3 + 0], vertsTemp[bI*3 + 1], vertsTemp[bI*3 + 2] );}
\DoxyCodeLine{729                     glm::vec3 c( vertsTemp[cI*3 + 0], vertsTemp[cI*3 + 1], vertsTemp[cI*3 + 2] );}
\DoxyCodeLine{730 }
\DoxyCodeLine{731                     glm::vec3 ab = b -\/ a;   glm::vec3 ac = c -\/ a;}
\DoxyCodeLine{732                     glm::vec3 ba = a -\/ b; glm::vec3 bc = c -\/ b;}
\DoxyCodeLine{733                     glm::vec3 ca = a -\/ c; glm::vec3 cb = b -\/ c;}
\DoxyCodeLine{734 }
\DoxyCodeLine{735                     glm::vec3 aN = glm::normalize( glm::cross( ab, ac ) );}
\DoxyCodeLine{736                     glm::vec3 bN = glm::normalize( glm::cross( bc, ba ) );}
\DoxyCodeLine{737                     glm::vec3 cN = glm::normalize( glm::cross( ca, cb ) );}
\DoxyCodeLine{738 }
\DoxyCodeLine{739                     \_vertices[ \_uniqueIndex*3 + 0 ] = a.x;}
\DoxyCodeLine{740                     \_vertices[ \_uniqueIndex*3 + 1 ] = a.y;}
\DoxyCodeLine{741                     \_vertices[ \_uniqueIndex*3 + 2 ] = a.z;}
\DoxyCodeLine{742 }
\DoxyCodeLine{743                     \_normals[ \_uniqueIndex*3 + 0 ] = aN.x;}
\DoxyCodeLine{744                     \_normals[ \_uniqueIndex*3 + 1 ] = aN.y;}
\DoxyCodeLine{745                     \_normals[ \_uniqueIndex*3 + 2 ] = aN.z;}
\DoxyCodeLine{746 }
\DoxyCodeLine{747                     \textcolor{keywordflow}{if}( \_hasVertexTexCoords ) \{}
\DoxyCodeLine{748                         \_texCoords[ \_uniqueIndex*2 + 0 ] = texCoordsTemp[ aI*2 + 0 ];}
\DoxyCodeLine{749                         \_texCoords[ \_uniqueIndex*2 + 1 ] = texCoordsTemp[ aI*2 + 1 ];}
\DoxyCodeLine{750                     \}}
\DoxyCodeLine{751 }
\DoxyCodeLine{752                     \_indices[ \_numIndices++ ] = \_uniqueIndex++;}
\DoxyCodeLine{753                     indicesSeen++;}
\DoxyCodeLine{754 }
\DoxyCodeLine{755                     \_vertices[ \_uniqueIndex*3 + 0 ] = b.x;}
\DoxyCodeLine{756                     \_vertices[ \_uniqueIndex*3 + 1 ] = b.y;}
\DoxyCodeLine{757                     \_vertices[ \_uniqueIndex*3 + 2 ] = b.z;}
\DoxyCodeLine{758 }
\DoxyCodeLine{759                     \_normals[ \_uniqueIndex*3 + 0 ] = bN.x;}
\DoxyCodeLine{760                     \_normals[ \_uniqueIndex*3 + 1 ] = bN.y;}
\DoxyCodeLine{761                     \_normals[ \_uniqueIndex*3 + 2 ] = bN.z;}
\DoxyCodeLine{762 }
\DoxyCodeLine{763                     \textcolor{keywordflow}{if}( \_hasVertexTexCoords ) \{}
\DoxyCodeLine{764                         \_texCoords[ \_uniqueIndex*2 + 0 ] = texCoordsTemp[ bI*2 + 0 ];}
\DoxyCodeLine{765                         \_texCoords[ \_uniqueIndex*2 + 1 ] = texCoordsTemp[ bI*2 + 1 ];}
\DoxyCodeLine{766                     \}}
\DoxyCodeLine{767 }
\DoxyCodeLine{768                     \_indices[ \_numIndices++ ] = \_uniqueIndex++;}
\DoxyCodeLine{769                     indicesSeen++;}
\DoxyCodeLine{770 }
\DoxyCodeLine{771                     \_vertices[ \_uniqueIndex*3 + 0 ] = c.x;}
\DoxyCodeLine{772                     \_vertices[ \_uniqueIndex*3 + 1 ] = c.y;}
\DoxyCodeLine{773                     \_vertices[ \_uniqueIndex*3 + 2 ] = c.z;}
\DoxyCodeLine{774 }
\DoxyCodeLine{775                     \_normals[ \_uniqueIndex*3 + 0 ] = cN.x;}
\DoxyCodeLine{776                     \_normals[ \_uniqueIndex*3 + 1 ] = cN.y;}
\DoxyCodeLine{777                     \_normals[ \_uniqueIndex*3 + 2 ] = cN.z;}
\DoxyCodeLine{778 }
\DoxyCodeLine{779                     \textcolor{keywordflow}{if}( \_hasVertexTexCoords ) \{}
\DoxyCodeLine{780                         \_texCoords[ \_uniqueIndex*2 + 0 ] = texCoordsTemp[ cI*2 + 0 ];}
\DoxyCodeLine{781                         \_texCoords[ \_uniqueIndex*2 + 1 ] = texCoordsTemp[ cI*2 + 1 ];}
\DoxyCodeLine{782                     \}}
\DoxyCodeLine{783 }
\DoxyCodeLine{784                     \_indices[ \_numIndices++ ] = \_uniqueIndex++;}
\DoxyCodeLine{785                     indicesSeen++;}
\DoxyCodeLine{786                 \}}
\DoxyCodeLine{787             \}}
\DoxyCodeLine{788 }
\DoxyCodeLine{789         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{790             \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.obj]: ignoring line: \%s\(\backslash\)n"{}}, line.c\_str() );}
\DoxyCodeLine{791         \}}
\DoxyCodeLine{792 }
\DoxyCodeLine{793         \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{794             progressCounter++;}
\DoxyCodeLine{795             \textcolor{keywordflow}{if}( progressCounter \% 5000 == 0 ) \{}
\DoxyCodeLine{796                 printf(\textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}});}
\DoxyCodeLine{797                 \textcolor{keywordflow}{switch}( progressCounter ) \{}
\DoxyCodeLine{798                     \textcolor{keywordflow}{case} 5000:  printf(\textcolor{stringliteral}{"{}[.obj]: parsing \%s...\(\backslash\)\(\backslash\)"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{799                     \textcolor{keywordflow}{case} 10000: printf(\textcolor{stringliteral}{"{}[.obj]: parsing \%s...|"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{800                     \textcolor{keywordflow}{case} 15000: printf(\textcolor{stringliteral}{"{}[.obj]: parsing \%s.../"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{801                     \textcolor{keywordflow}{case} 20000: printf(\textcolor{stringliteral}{"{}[.obj]: parsing \%s...-\/"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{802                 \}}
\DoxyCodeLine{803                 fflush(stdout);}
\DoxyCodeLine{804             \}}
\DoxyCodeLine{805             \textcolor{keywordflow}{if}( progressCounter == 20000 )}
\DoxyCodeLine{806                 progressCounter = 0;}
\DoxyCodeLine{807         \}}
\DoxyCodeLine{808     \}}
\DoxyCodeLine{809 }
\DoxyCodeLine{810     in.close();}
\DoxyCodeLine{811 }
\DoxyCodeLine{812     \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{813         printf( \textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}} );}
\DoxyCodeLine{814         printf( \textcolor{stringliteral}{"{}[.obj]: parsing \%s...done!\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{815     \}}
\DoxyCodeLine{816 }
\DoxyCodeLine{817     \_materialIndexStartStop.find( currentMaterial )-\/>second.back().second = indicesSeen -\/ 1;}
\DoxyCodeLine{818 }
\DoxyCodeLine{819     glBindVertexArray( \_vaod );}
\DoxyCodeLine{820     glBindBuffer( GL\_ARRAY\_BUFFER, \_vbods[0] );}
\DoxyCodeLine{821     glBufferData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 8, NULL, GL\_STATIC\_DRAW );}
\DoxyCodeLine{822     glBufferSubData( GL\_ARRAY\_BUFFER, 0,                                                                  \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \_vertices );}
\DoxyCodeLine{823     glBufferSubData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \_normals );}
\DoxyCodeLine{824     glBufferSubData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 6, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 2, \_texCoords );}
\DoxyCodeLine{825 }
\DoxyCodeLine{826     glBindBuffer( GL\_ELEMENT\_ARRAY\_BUFFER, \_vbods[1] );}
\DoxyCodeLine{827     glBufferData( GL\_ELEMENT\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLuint) * indicesSeen, \_indices, GL\_STATIC\_DRAW );}
\DoxyCodeLine{828 }
\DoxyCodeLine{829     time(\&end);}
\DoxyCodeLine{830     \textcolor{keywordtype}{double} seconds = difftime( end, start );}
\DoxyCodeLine{831 }
\DoxyCodeLine{832     \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{833         printf( \textcolor{stringliteral}{"{}[.obj]: Completed in \%.3fs\(\backslash\)n"{}}, seconds );}
\DoxyCodeLine{834         printf( \textcolor{stringliteral}{"{}[.obj]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/ \(\backslash\)n\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{835     \}}
\DoxyCodeLine{836 }
\DoxyCodeLine{837     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{838 \}}
\DoxyCodeLine{839 }
\DoxyCodeLine{840 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} CSCI441::ModelLoader::\_loadMTLFile( \textcolor{keyword}{const} \textcolor{keywordtype}{char}* mtlFilename, \textcolor{keywordtype}{bool} INFO, \textcolor{keywordtype}{bool} ERRORS ) \{}
\DoxyCodeLine{841     \textcolor{keywordtype}{bool} result = \textcolor{keyword}{true};}
\DoxyCodeLine{842 }
\DoxyCodeLine{843     \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.mtl]: -\/*-\/*-\/*-\/*-\/*-\/*-\/*-\/ BEGIN \%s Info -\/*-\/*-\/*-\/*-\/*-\/*-\/*-\/\(\backslash\)n"{}}, mtlFilename );}
\DoxyCodeLine{844 }
\DoxyCodeLine{845     std::string line;}
\DoxyCodeLine{846     std::string path;}
\DoxyCodeLine{847     \textcolor{keywordflow}{if}( strstr( \_filename, \textcolor{stringliteral}{"{}/"{}} ) != NULL ) \{}
\DoxyCodeLine{848         path = std::string( \_filename ).substr( 0, std::string(\_filename).find\_last\_of(\textcolor{stringliteral}{"{}/"{}})+1 );}
\DoxyCodeLine{849     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{850         path = \textcolor{stringliteral}{"{}./"{}};}
\DoxyCodeLine{851     \}}
\DoxyCodeLine{852 }
\DoxyCodeLine{853     std::ifstream in;}
\DoxyCodeLine{854     in.open( mtlFilename );}
\DoxyCodeLine{855     \textcolor{keywordflow}{if}( !in.is\_open() ) \{}
\DoxyCodeLine{856         std::string folderMtlFile = path + mtlFilename;}
\DoxyCodeLine{857         in.open( folderMtlFile.c\_str() );}
\DoxyCodeLine{858         \textcolor{keywordflow}{if}( !in.is\_open() ) \{}
\DoxyCodeLine{859             \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.mtl]: [ERROR]: could not open material file: \%s\(\backslash\)n"{}}, mtlFilename );}
\DoxyCodeLine{860             \textcolor{keywordflow}{if} ( INFO ) printf( \textcolor{stringliteral}{"{}[.mtl]: -\/*-\/*-\/*-\/*-\/*-\/*-\/*-\/  END \%s Info  -\/*-\/*-\/*-\/*-\/*-\/*-\/*-\/\(\backslash\)n"{}}, mtlFilename );}
\DoxyCodeLine{861             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{862         \}}
\DoxyCodeLine{863     \}}
\DoxyCodeLine{864 }
\DoxyCodeLine{865     \mbox{\hyperlink{struct_c_s_c_i441___i_n_t_e_r_n_a_l_1_1_model_material}{CSCI441\_INTERNAL::ModelMaterial}}* currentMaterial = NULL;}
\DoxyCodeLine{866     std::string materialName;}
\DoxyCodeLine{867 }
\DoxyCodeLine{868     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *textureData = NULL;}
\DoxyCodeLine{869     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *maskData = NULL;}
\DoxyCodeLine{870     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *fullData;}
\DoxyCodeLine{871     \textcolor{keywordtype}{int} texWidth, texHeight, textureChannels = 1, maskChannels = 1;}
\DoxyCodeLine{872     GLuint textureHandle = 0;}
\DoxyCodeLine{873 }
\DoxyCodeLine{874     std::map< std::string, GLuint > imageHandles;}
\DoxyCodeLine{875 }
\DoxyCodeLine{876     \textcolor{keywordtype}{int} numMaterials = 0;}
\DoxyCodeLine{877 }
\DoxyCodeLine{878     \textcolor{keywordflow}{while}( getline( in, line ) ) \{}
\DoxyCodeLine{879         \textcolor{keywordflow}{if}( line.length() > 1 \&\& line.at(0) == \textcolor{charliteral}{'\(\backslash\)t'} )}
\DoxyCodeLine{880             line = line.substr( 1 );}
\DoxyCodeLine{881         line.erase( line.find\_last\_not\_of( \textcolor{stringliteral}{"{} \(\backslash\)n\(\backslash\)r\(\backslash\)t"{}} ) + 1 );}
\DoxyCodeLine{882 }
\DoxyCodeLine{883         std::vector< std::string > tokens = \_tokenizeString( line, \textcolor{stringliteral}{"{} /"{}} );}
\DoxyCodeLine{884         \textcolor{keywordflow}{if}( tokens.size() < 1 ) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{885 }
\DoxyCodeLine{886         \textcolor{comment}{//the line should have a single character that lets us know if it's a...}}
\DoxyCodeLine{887         \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}\#"{}} ) ) \{                           \textcolor{comment}{// comment}}
\DoxyCodeLine{888         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}newmtl"{}} ) ) \{               \textcolor{comment}{//new material}}
\DoxyCodeLine{889             \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.mtl]: Parsing material \%s properties\(\backslash\)n"{}}, tokens[1].c\_str() );}
\DoxyCodeLine{890             currentMaterial = \textcolor{keyword}{new} \mbox{\hyperlink{struct_c_s_c_i441___i_n_t_e_r_n_a_l_1_1_model_material}{CSCI441\_INTERNAL::ModelMaterial}}();}
\DoxyCodeLine{891             materialName = tokens[1];}
\DoxyCodeLine{892             \_materials.insert( std::pair<std::string, CSCI441\_INTERNAL::ModelMaterial*>( materialName, currentMaterial ) );}
\DoxyCodeLine{893 }
\DoxyCodeLine{894             textureHandle = 0;}
\DoxyCodeLine{895             textureData = NULL;}
\DoxyCodeLine{896             maskData = NULL;}
\DoxyCodeLine{897             textureChannels = 1;}
\DoxyCodeLine{898             maskChannels = 1;}
\DoxyCodeLine{899 }
\DoxyCodeLine{900             numMaterials++;}
\DoxyCodeLine{901         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}Ka"{}} ) ) \{                   \textcolor{comment}{// ambient component}}
\DoxyCodeLine{902             currentMaterial-\/>ambient[0] = atof( tokens[1].c\_str() );}
\DoxyCodeLine{903             currentMaterial-\/>ambient[1] = atof( tokens[2].c\_str() );}
\DoxyCodeLine{904             currentMaterial-\/>ambient[2] = atof( tokens[3].c\_str() );}
\DoxyCodeLine{905         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}Kd"{}} ) ) \{                   \textcolor{comment}{// diffuse component}}
\DoxyCodeLine{906             currentMaterial-\/>diffuse[0] = atof( tokens[1].c\_str() );}
\DoxyCodeLine{907             currentMaterial-\/>diffuse[1] = atof( tokens[2].c\_str() );}
\DoxyCodeLine{908             currentMaterial-\/>diffuse[2] = atof( tokens[3].c\_str() );}
\DoxyCodeLine{909         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}Ks"{}} ) ) \{                   \textcolor{comment}{// specular component}}
\DoxyCodeLine{910             currentMaterial-\/>specular[0] = atof( tokens[1].c\_str() );}
\DoxyCodeLine{911             currentMaterial-\/>specular[1] = atof( tokens[2].c\_str() );}
\DoxyCodeLine{912             currentMaterial-\/>specular[2] = atof( tokens[3].c\_str() );}
\DoxyCodeLine{913         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}Ke"{}} ) ) \{                   \textcolor{comment}{// emissive component}}
\DoxyCodeLine{914             currentMaterial-\/>emissive[0] = atof( tokens[1].c\_str() );}
\DoxyCodeLine{915             currentMaterial-\/>emissive[1] = atof( tokens[2].c\_str() );}
\DoxyCodeLine{916             currentMaterial-\/>emissive[2] = atof( tokens[3].c\_str() );}
\DoxyCodeLine{917         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}Ns"{}} ) ) \{                   \textcolor{comment}{// shininess component}}
\DoxyCodeLine{918             currentMaterial-\/>shininess = atof( tokens[1].c\_str() );}
\DoxyCodeLine{919         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}Tr"{}} )}
\DoxyCodeLine{920                     || !tokens[0].compare( \textcolor{stringliteral}{"{}d"{}} ) ) \{                    \textcolor{comment}{// transparency component -\/ Tr or d can be used depending on the format}}
\DoxyCodeLine{921             currentMaterial-\/>ambient[3] = atof( tokens[1].c\_str() );}
\DoxyCodeLine{922             currentMaterial-\/>diffuse[3] = atof( tokens[1].c\_str() );}
\DoxyCodeLine{923             currentMaterial-\/>specular[3] = atof( tokens[1].c\_str() );}
\DoxyCodeLine{924         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}illum"{}} ) ) \{                    \textcolor{comment}{// illumination type component}}
\DoxyCodeLine{925             \textcolor{comment}{// TODO ?}}
\DoxyCodeLine{926         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}map\_Kd"{}} ) ) \{               \textcolor{comment}{// diffuse color texture map}}
\DoxyCodeLine{927             \textcolor{keywordflow}{if}( imageHandles.find( tokens[1] ) != imageHandles.end() ) \{}
\DoxyCodeLine{928                 \textcolor{comment}{// \_textureHandles-\/>insert( pair< string, GLuint >( materialName, imageHandles.find( tokens[1] )-\/>second ) );}}
\DoxyCodeLine{929                 currentMaterial-\/>map\_Kd = imageHandles.find( tokens[1] )-\/>second;}
\DoxyCodeLine{930             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{931                 stbi\_set\_flip\_vertically\_on\_load(\textcolor{keyword}{true});}
\DoxyCodeLine{932                 textureData = stbi\_load( tokens[1].c\_str(), \&texWidth, \&texHeight, \&textureChannels, 0 );}
\DoxyCodeLine{933                 \textcolor{keywordflow}{if}( !textureData ) \{}
\DoxyCodeLine{934                     std::string folderName = path + tokens[1];}
\DoxyCodeLine{935                     textureData = stbi\_load( folderName.c\_str(), \&texWidth, \&texHeight, \&textureChannels, 0 );}
\DoxyCodeLine{936                 \}}
\DoxyCodeLine{937 }
\DoxyCodeLine{938                 \textcolor{keywordflow}{if}( !textureData ) \{}
\DoxyCodeLine{939                     \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.mtl]: [ERROR]: File Not Found: \%s\(\backslash\)n"{}}, tokens[1].c\_str() );}
\DoxyCodeLine{940                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{941                     \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.mtl]: TextureMap:\(\backslash\)t\%s\(\backslash\)tSize: \%dx\%d\(\backslash\)tColors: \%d\(\backslash\)n"{}}, tokens[1].c\_str(), texWidth, texHeight, textureChannels );}
\DoxyCodeLine{942 }
\DoxyCodeLine{943                     \textcolor{keywordflow}{if}( maskData == NULL ) \{}
\DoxyCodeLine{944                         \textcolor{keywordflow}{if}( textureHandle == 0 ) \{}
\DoxyCodeLine{945                             glGenTextures( 1, \&textureHandle );}
\DoxyCodeLine{946                             imageHandles.insert( std::pair<std::string, GLuint>( tokens[1], textureHandle ) );}
\DoxyCodeLine{947                         \}}
\DoxyCodeLine{948 }
\DoxyCodeLine{949                         glBindTexture( GL\_TEXTURE\_2D, textureHandle );}
\DoxyCodeLine{950 }
\DoxyCodeLine{951                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_MIN\_FILTER, GL\_LINEAR);}
\DoxyCodeLine{952                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_MAG\_FILTER, GL\_LINEAR);}
\DoxyCodeLine{953 }
\DoxyCodeLine{954                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_S, GL\_REPEAT);}
\DoxyCodeLine{955                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_T, GL\_REPEAT);}
\DoxyCodeLine{956 }
\DoxyCodeLine{957                         GLenum colorSpace = GL\_RGB;}
\DoxyCodeLine{958                         \textcolor{keywordflow}{if}( textureChannels == 4 )}
\DoxyCodeLine{959                             colorSpace = GL\_RGBA;}
\DoxyCodeLine{960                         glTexImage2D( GL\_TEXTURE\_2D, 0, colorSpace, texWidth, texHeight, 0, colorSpace, GL\_UNSIGNED\_BYTE, textureData );}
\DoxyCodeLine{961 }
\DoxyCodeLine{962                         currentMaterial-\/>map\_Kd = textureHandle;}
\DoxyCodeLine{963                     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{964                         fullData = CSCI441\_INTERNAL::createTransparentTexture( textureData, maskData, texWidth, texHeight, textureChannels, maskChannels );}
\DoxyCodeLine{965 }
\DoxyCodeLine{966                         \textcolor{keywordflow}{if}( textureHandle == 0 ) \{}
\DoxyCodeLine{967                             glGenTextures( 1, \&textureHandle );}
\DoxyCodeLine{968                             imageHandles.insert( std::pair<std::string, GLuint>( tokens[1], textureHandle ) );}
\DoxyCodeLine{969                         \}}
\DoxyCodeLine{970 }
\DoxyCodeLine{971                         glBindTexture( GL\_TEXTURE\_2D, textureHandle );}
\DoxyCodeLine{972 }
\DoxyCodeLine{973                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_MIN\_FILTER, GL\_LINEAR);}
\DoxyCodeLine{974                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_MAG\_FILTER, GL\_LINEAR);}
\DoxyCodeLine{975 }
\DoxyCodeLine{976                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_S, GL\_REPEAT);}
\DoxyCodeLine{977                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_T, GL\_REPEAT);}
\DoxyCodeLine{978 }
\DoxyCodeLine{979                         glTexImage2D( GL\_TEXTURE\_2D, 0, GL\_RGBA, texWidth, texHeight, 0, GL\_RGBA, GL\_UNSIGNED\_BYTE, fullData );}
\DoxyCodeLine{980 }
\DoxyCodeLine{981                         \textcolor{keyword}{delete} fullData;}
\DoxyCodeLine{982 }
\DoxyCodeLine{983                         currentMaterial-\/>map\_Kd = textureHandle;}
\DoxyCodeLine{984                     \}}
\DoxyCodeLine{985                 \}}
\DoxyCodeLine{986             \}}
\DoxyCodeLine{987         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}map\_d"{}} ) ) \{                \textcolor{comment}{// alpha texture map}}
\DoxyCodeLine{988             \textcolor{keywordflow}{if}( imageHandles.find( tokens[1] ) != imageHandles.end() ) \{}
\DoxyCodeLine{989                 \textcolor{comment}{// \_textureHandles-\/>insert( pair< string, GLuint >( materialName, imageHandles.find( tokens[1] )-\/>second ) );}}
\DoxyCodeLine{990                 currentMaterial-\/>map\_d = imageHandles.find( tokens[1] )-\/>second;}
\DoxyCodeLine{991             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{992                 stbi\_set\_flip\_vertically\_on\_load(\textcolor{keyword}{true});}
\DoxyCodeLine{993                 maskData = stbi\_load( tokens[1].c\_str(), \&texWidth, \&texHeight, \&textureChannels, 0 );}
\DoxyCodeLine{994                 \textcolor{keywordflow}{if}( !textureData ) \{}
\DoxyCodeLine{995                     std::string folderName = path + tokens[1];}
\DoxyCodeLine{996                     maskData = stbi\_load( folderName.c\_str(), \&texWidth, \&texHeight, \&textureChannels, 0 );}
\DoxyCodeLine{997                 \}}
\DoxyCodeLine{998 }
\DoxyCodeLine{999                 \textcolor{keywordflow}{if}( !maskData ) \{}
\DoxyCodeLine{1000                     \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.mtl]: [ERROR]: File Not Found: \%s\(\backslash\)n"{}}, tokens[1].c\_str() );}
\DoxyCodeLine{1001                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1002                     \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.mtl]: AlphaMap:  \(\backslash\)t\%s\(\backslash\)tSize: \%dx\%d\(\backslash\)tColors: \%d\(\backslash\)n"{}}, tokens[1].c\_str(), texWidth, texHeight, maskChannels );}
\DoxyCodeLine{1003 }
\DoxyCodeLine{1004                     \textcolor{keywordflow}{if}( textureData != NULL ) \{}
\DoxyCodeLine{1005                         fullData = CSCI441\_INTERNAL::createTransparentTexture( textureData, maskData, texWidth, texHeight, textureChannels, maskChannels );}
\DoxyCodeLine{1006 }
\DoxyCodeLine{1007                         \textcolor{keywordflow}{if}( textureHandle == 0 )}
\DoxyCodeLine{1008                             glGenTextures( 1, \&textureHandle );}
\DoxyCodeLine{1009 }
\DoxyCodeLine{1010                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_MIN\_FILTER, GL\_LINEAR);}
\DoxyCodeLine{1011                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_MAG\_FILTER, GL\_LINEAR);}
\DoxyCodeLine{1012 }
\DoxyCodeLine{1013                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_S, GL\_REPEAT);}
\DoxyCodeLine{1014                         glTexParameterf(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_T, GL\_REPEAT);}
\DoxyCodeLine{1015 }
\DoxyCodeLine{1016                         glTexImage2D( GL\_TEXTURE\_2D, 0, GL\_RGBA, texWidth, texHeight, 0, GL\_RGBA, GL\_UNSIGNED\_BYTE, fullData );}
\DoxyCodeLine{1017 }
\DoxyCodeLine{1018                         \textcolor{keyword}{delete} fullData;}
\DoxyCodeLine{1019                     \}}
\DoxyCodeLine{1020                 \}}
\DoxyCodeLine{1021             \}}
\DoxyCodeLine{1022         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}map\_Ka"{}} ) ) \{               \textcolor{comment}{// ambient color texture map}}
\DoxyCodeLine{1023 }
\DoxyCodeLine{1024         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}map\_Ks"{}} ) ) \{               \textcolor{comment}{// specular color texture map}}
\DoxyCodeLine{1025 }
\DoxyCodeLine{1026         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}map\_Ns"{}} ) ) \{               \textcolor{comment}{// specular highlight map (shininess map)}}
\DoxyCodeLine{1027 }
\DoxyCodeLine{1028         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}Ni"{}} ) ) \{                       \textcolor{comment}{// optical density / index of refraction}}
\DoxyCodeLine{1029 }
\DoxyCodeLine{1030         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}Tf"{}} ) ) \{                       \textcolor{comment}{// transmission filter}}
\DoxyCodeLine{1031 }
\DoxyCodeLine{1032         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}bump"{}} )}
\DoxyCodeLine{1033                     || !tokens[0].compare( \textcolor{stringliteral}{"{}map\_bump"{}} ) ) \{             \textcolor{comment}{// bump map}}
\DoxyCodeLine{1034 }
\DoxyCodeLine{1035         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1036             \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.mtl]: ignoring line: \%s\(\backslash\)n"{}}, line.c\_str() );}
\DoxyCodeLine{1037         \}}
\DoxyCodeLine{1038     \}}
\DoxyCodeLine{1039 }
\DoxyCodeLine{1040     in.close();}
\DoxyCodeLine{1041 }
\DoxyCodeLine{1042     \textcolor{keywordflow}{if} ( INFO ) \{}
\DoxyCodeLine{1043         printf( \textcolor{stringliteral}{"{}[.mtl]: Materials:\(\backslash\)t\%d\(\backslash\)n"{}}, numMaterials );}
\DoxyCodeLine{1044         printf( \textcolor{stringliteral}{"{}[.mtl]: -\/*-\/*-\/*-\/*-\/*-\/*-\/*-\/  END \%s Info  -\/*-\/*-\/*-\/*-\/*-\/*-\/*-\/\(\backslash\)n"{}}, mtlFilename );}
\DoxyCodeLine{1045     \}}
\DoxyCodeLine{1046 }
\DoxyCodeLine{1047     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1048 \}}
\DoxyCodeLine{1049 }
\DoxyCodeLine{1050 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} CSCI441::ModelLoader::\_loadOFFFile( \textcolor{keywordtype}{bool} INFO, \textcolor{keywordtype}{bool} ERRORS ) \{}
\DoxyCodeLine{1051     \textcolor{keywordtype}{bool} result = \textcolor{keyword}{true};}
\DoxyCodeLine{1052 }
\DoxyCodeLine{1053     \textcolor{keywordflow}{if} (INFO ) printf( \textcolor{stringliteral}{"{}[.off]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/ BEGIN \%s Info -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1054 }
\DoxyCodeLine{1055     time\_t start, end;}
\DoxyCodeLine{1056     time(\&start);}
\DoxyCodeLine{1057 }
\DoxyCodeLine{1058     std::ifstream in( \_filename );}
\DoxyCodeLine{1059     \textcolor{keywordflow}{if}( !in.is\_open() ) \{}
\DoxyCodeLine{1060         \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.off]: [ERROR]: Could not open \(\backslash\)"{}\%s\(\backslash\)"{}\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1061         \textcolor{keywordflow}{if} ( INFO ) printf( \textcolor{stringliteral}{"{}[.off]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1062         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1063     \}}
\DoxyCodeLine{1064 }
\DoxyCodeLine{1065     GLuint numVertices = 0, numFaces = 0, numTriangles = 0;}
\DoxyCodeLine{1066     \textcolor{keywordtype}{float} minX = 999999, maxX = -\/999999, minY = 999999, maxY = -\/999999, minZ = 999999, maxZ = -\/999999;}
\DoxyCodeLine{1067     std::string line;}
\DoxyCodeLine{1068 }
\DoxyCodeLine{1069     \textcolor{keyword}{enum} OFF\_FILE\_STATE \{ HEADER, VERTICES, FACES, DONE \};}
\DoxyCodeLine{1070 }
\DoxyCodeLine{1071     OFF\_FILE\_STATE fileState = HEADER;}
\DoxyCodeLine{1072 }
\DoxyCodeLine{1073     GLuint vSeen = 0, fSeen = 0;}
\DoxyCodeLine{1074 }
\DoxyCodeLine{1075     \textcolor{keywordflow}{while}( getline( in, line ) ) \{}
\DoxyCodeLine{1076         \textcolor{keywordflow}{if}( line.length() > 1 \&\& line.at(0) == \textcolor{charliteral}{'\(\backslash\)t'} )}
\DoxyCodeLine{1077             line = line.substr( 1 );}
\DoxyCodeLine{1078         line.erase( line.find\_last\_not\_of( \textcolor{stringliteral}{"{} \(\backslash\)n\(\backslash\)r\(\backslash\)t"{}} ) + 1 );}
\DoxyCodeLine{1079 }
\DoxyCodeLine{1080         std::vector< std::string > tokens = \_tokenizeString( line, \textcolor{stringliteral}{"{} \(\backslash\)t"{}} );}
\DoxyCodeLine{1081         \textcolor{keywordflow}{if}( tokens.size() < 1 ) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1082 }
\DoxyCodeLine{1083         \textcolor{comment}{//the line should have a single character that lets us know if it's a...}}
\DoxyCodeLine{1084         \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}\#"{}} ) || tokens[0].find\_first\_of(\textcolor{stringliteral}{"{}\#"{}}) == 0 ) \{                              \textcolor{comment}{// comment ignore}}
\DoxyCodeLine{1085         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == HEADER ) \{}
\DoxyCodeLine{1086             \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}OFF"{}} ) ) \{                 \textcolor{comment}{// denotes OFF File type}}
\DoxyCodeLine{1087             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1088                 \textcolor{keywordflow}{if}( tokens.size() != 3 ) \{}
\DoxyCodeLine{1089                     \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.off]: [ERROR]: Malformed OFF file.  \# vertices, faces, edges not properly specified\(\backslash\)n"{}} );}
\DoxyCodeLine{1090                     \textcolor{keywordflow}{if} ( INFO ) printf( \textcolor{stringliteral}{"{}[.off]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1091                     in.close();}
\DoxyCodeLine{1092                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1093                 \}}
\DoxyCodeLine{1094                 \textcolor{comment}{// read in number of expected vertices, faces, and edges}}
\DoxyCodeLine{1095                 numVertices = atoi( tokens[0].c\_str() );}
\DoxyCodeLine{1096                 numFaces = atoi( tokens[1].c\_str() );}
\DoxyCodeLine{1097 }
\DoxyCodeLine{1098                 \textcolor{comment}{// ignore tokens[2] -\/ number of edges -\/-\/ unnecessary information}}
\DoxyCodeLine{1099                 \textcolor{comment}{// numEdges = atoi( tokens[2].c\_str() );}}
\DoxyCodeLine{1100 }
\DoxyCodeLine{1101                 fileState = VERTICES;}
\DoxyCodeLine{1102             \}}
\DoxyCodeLine{1103         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == VERTICES ) \{}
\DoxyCodeLine{1104             \textcolor{comment}{// read in x y z vertex location}}
\DoxyCodeLine{1105             \textcolor{keywordtype}{float} x = atof( tokens[0].c\_str() ),}
\DoxyCodeLine{1106                         y = atof( tokens[1].c\_str() ),}
\DoxyCodeLine{1107                         z = atof( tokens[2].c\_str() );}
\DoxyCodeLine{1108 }
\DoxyCodeLine{1109             \textcolor{keywordflow}{if}( x < minX ) minX = x;}
\DoxyCodeLine{1110             \textcolor{keywordflow}{if}( x > maxX ) maxX = x;}
\DoxyCodeLine{1111             \textcolor{keywordflow}{if}( y < minY ) minY = y;}
\DoxyCodeLine{1112             \textcolor{keywordflow}{if}( y > maxY ) maxY = y;}
\DoxyCodeLine{1113             \textcolor{keywordflow}{if}( z < minZ ) minZ = z;}
\DoxyCodeLine{1114             \textcolor{keywordflow}{if}( z > maxZ ) maxZ = z;}
\DoxyCodeLine{1115 }
\DoxyCodeLine{1116             vSeen++;}
\DoxyCodeLine{1117             \textcolor{keywordflow}{if}( vSeen == numVertices )}
\DoxyCodeLine{1118                 fileState = FACES;}
\DoxyCodeLine{1119         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == FACES ) \{}
\DoxyCodeLine{1120             GLuint numberOfVerticesInFace = atoi( tokens[0].c\_str() );}
\DoxyCodeLine{1121 }
\DoxyCodeLine{1122             numTriangles += numberOfVerticesInFace -\/ 3 + 1;}
\DoxyCodeLine{1123 }
\DoxyCodeLine{1124             \textcolor{keywordflow}{if}( fSeen == numFaces )}
\DoxyCodeLine{1125                 fileState = DONE;}
\DoxyCodeLine{1126         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1127             \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.off]: unknown file state: \%d\(\backslash\)n"{}}, fileState );}
\DoxyCodeLine{1128         \}}
\DoxyCodeLine{1129     \}}
\DoxyCodeLine{1130     in.close();}
\DoxyCodeLine{1131 }
\DoxyCodeLine{1132     \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{1133         printf( \textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}} );}
\DoxyCodeLine{1134         printf( \textcolor{stringliteral}{"{}[.off]: scanning \%s...done!\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1135         printf( \textcolor{stringliteral}{"{}[.off]: -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}} );}
\DoxyCodeLine{1136         printf( \textcolor{stringliteral}{"{}[.off]: Model Stats:\(\backslash\)n"{}} );}
\DoxyCodeLine{1137         printf( \textcolor{stringliteral}{"{}[.off]: Vertices:  \(\backslash\)t\%u\(\backslash\)tNormals:   \(\backslash\)t\%u\(\backslash\)tTex Coords:\(\backslash\)t\%u\(\backslash\)n"{}}, numVertices, 0, 0 );}
\DoxyCodeLine{1138         printf( \textcolor{stringliteral}{"{}[.off]: Faces:     \(\backslash\)t\%u\(\backslash\)tTriangles: \(\backslash\)t\%u\(\backslash\)n"{}}, numFaces, numTriangles );}
\DoxyCodeLine{1139         printf( \textcolor{stringliteral}{"{}[.off]: Dimensions:\(\backslash\)t(\%f, \%f, \%f)\(\backslash\)n"{}}, (maxX -\/ minX), (maxY -\/ minY), (maxZ -\/ minZ) );}
\DoxyCodeLine{1140     \}}
\DoxyCodeLine{1141 }
\DoxyCodeLine{1142     \textcolor{keywordflow}{if}( \_hasVertexNormals || !AUTO\_GEN\_NORMALS ) \{}
\DoxyCodeLine{1143         \textcolor{keywordflow}{if} (INFO \&\& !\_hasVertexNormals)}
\DoxyCodeLine{1144             printf( \textcolor{stringliteral}{"{}[.off]: [WARN]: No vertex normals exist on model.  To autogenerate vertex\(\backslash\)n\(\backslash\)tnormals, call CSCI441::ModelLoader::enableAutoGenerateNormals()\(\backslash\)n\(\backslash\)tprior to loading the model file.\(\backslash\)n"{}} );}
\DoxyCodeLine{1145         \_vertices = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numVertices * 3);}
\DoxyCodeLine{1146         \_texCoords = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numVertices * 2);}
\DoxyCodeLine{1147         \_normals = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numVertices * 3);}
\DoxyCodeLine{1148         \_indices = (GLuint*)malloc(\textcolor{keyword}{sizeof}(GLuint) * numTriangles * 3);}
\DoxyCodeLine{1149     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1150         \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.off]: No vertex normals exist on model, vertex normals will be autogenerated\(\backslash\)n"{}} );}
\DoxyCodeLine{1151         \_vertices = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numTriangles * 3 * 3);}
\DoxyCodeLine{1152         \_texCoords = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numTriangles * 3 * 2);}
\DoxyCodeLine{1153         \_normals = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numTriangles * 3 * 3);}
\DoxyCodeLine{1154         \_indices = (GLuint*)malloc(\textcolor{keyword}{sizeof}(GLuint) * numTriangles * 3);}
\DoxyCodeLine{1155     \}}
\DoxyCodeLine{1156 }
\DoxyCodeLine{1157     std::vector<GLfloat> vertsTemp;}
\DoxyCodeLine{1158 }
\DoxyCodeLine{1159     \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.off]: -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}} );}
\DoxyCodeLine{1160 }
\DoxyCodeLine{1161     in.open( \_filename );}
\DoxyCodeLine{1162 }
\DoxyCodeLine{1163     \_uniqueIndex = 0;}
\DoxyCodeLine{1164     \_numIndices = 0;}
\DoxyCodeLine{1165     vSeen = 0;}
\DoxyCodeLine{1166 }
\DoxyCodeLine{1167     fileState = HEADER;}
\DoxyCodeLine{1168 }
\DoxyCodeLine{1169     \textcolor{keywordtype}{int} progressCounter = 0;}
\DoxyCodeLine{1170 }
\DoxyCodeLine{1171     \textcolor{keywordflow}{while}( getline( in, line ) ) \{}
\DoxyCodeLine{1172         \textcolor{keywordflow}{if}( line.length() > 1 \&\& line.at(0) == \textcolor{charliteral}{'\(\backslash\)t'} )}
\DoxyCodeLine{1173             line = line.substr( 1 );}
\DoxyCodeLine{1174         line.erase( line.find\_last\_not\_of( \textcolor{stringliteral}{"{} \(\backslash\)n\(\backslash\)r\(\backslash\)t"{}} ) + 1 );}
\DoxyCodeLine{1175 }
\DoxyCodeLine{1176         std::vector< std::string > tokens = \_tokenizeString( line, \textcolor{stringliteral}{"{} \(\backslash\)t"{}} );}
\DoxyCodeLine{1177         \textcolor{keywordflow}{if}( tokens.size() < 1 ) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1178 }
\DoxyCodeLine{1179         \textcolor{comment}{//the line should have a single character that lets us know if it's a...}}
\DoxyCodeLine{1180         \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}\#"{}} ) || tokens[0].find\_first\_of(\textcolor{stringliteral}{"{}\#"{}}) == 0 ) \{                              \textcolor{comment}{// comment ignore}}
\DoxyCodeLine{1181         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == HEADER ) \{}
\DoxyCodeLine{1182             \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}OFF"{}} ) ) \{                 \textcolor{comment}{// denotes OFF File type}}
\DoxyCodeLine{1183             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1184 }
\DoxyCodeLine{1185                 \textcolor{comment}{// end of OFF Header reached}}
\DoxyCodeLine{1186                 fileState = VERTICES;}
\DoxyCodeLine{1187             \}}
\DoxyCodeLine{1188         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == VERTICES ) \{}
\DoxyCodeLine{1189             \textcolor{comment}{// read in x y z vertex location}}
\DoxyCodeLine{1190             \textcolor{keywordtype}{float} x = atof( tokens[0].c\_str() ),}
\DoxyCodeLine{1191                         y = atof( tokens[1].c\_str() ),}
\DoxyCodeLine{1192                         z = atof( tokens[2].c\_str() );}
\DoxyCodeLine{1193 }
\DoxyCodeLine{1194             \textcolor{comment}{// check if RGB(A) color information is associated with vertex}}
\DoxyCodeLine{1195             \textcolor{keywordflow}{if}( tokens.size() == 6 || tokens.size() == 7 ) \{}
\DoxyCodeLine{1196                 \textcolor{comment}{// TODO: handle RGBA color info}}
\DoxyCodeLine{1197                 \textcolor{comment}{// float r = atof( tokens[3].c\_str() ),}}
\DoxyCodeLine{1198                 \textcolor{comment}{//      g = atof( tokens[4].c\_str() ),}}
\DoxyCodeLine{1199                 \textcolor{comment}{//      b = atof( tokens[5].c\_str() ),}}
\DoxyCodeLine{1200                 \textcolor{comment}{//      a = 1;}}
\DoxyCodeLine{1201         \textcolor{comment}{//}}
\DoxyCodeLine{1202                 \textcolor{comment}{// if( tokens.size() == 7 )}}
\DoxyCodeLine{1203                 \textcolor{comment}{//  a = atof( tokens[6].c\_str() );}}
\DoxyCodeLine{1204             \}}
\DoxyCodeLine{1205 }
\DoxyCodeLine{1206             \textcolor{keywordflow}{if}( \_hasVertexNormals || !AUTO\_GEN\_NORMALS ) \{}
\DoxyCodeLine{1207                 \_vertices[ \_uniqueIndex*3 + 0 ] = x;}
\DoxyCodeLine{1208                 \_vertices[ \_uniqueIndex*3 + 1 ] = y;}
\DoxyCodeLine{1209                 \_vertices[ \_uniqueIndex*3 + 2 ] = z;}
\DoxyCodeLine{1210 }
\DoxyCodeLine{1211                 \_uniqueIndex++;}
\DoxyCodeLine{1212             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1213                 vertsTemp.push\_back( x );}
\DoxyCodeLine{1214                 vertsTemp.push\_back( y );}
\DoxyCodeLine{1215                 vertsTemp.push\_back( z );}
\DoxyCodeLine{1216 }
\DoxyCodeLine{1217                 vSeen++;}
\DoxyCodeLine{1218             \}}
\DoxyCodeLine{1219             \textcolor{comment}{// if all vertices have been read in, move on to faces}}
\DoxyCodeLine{1220             \textcolor{keywordflow}{if}( \_uniqueIndex == numVertices || vSeen == numVertices )}
\DoxyCodeLine{1221                 fileState = FACES;}
\DoxyCodeLine{1222         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == FACES ) \{}
\DoxyCodeLine{1223             GLuint numberOfVerticesInFace = atoi( tokens[0].c\_str() );}
\DoxyCodeLine{1224 }
\DoxyCodeLine{1225             \textcolor{comment}{// read in each vertex index of the face}}
\DoxyCodeLine{1226             \textcolor{keywordflow}{for}(GLuint i = 2; i <= numberOfVerticesInFace -\/ 1; i++) \{}
\DoxyCodeLine{1227                 \textcolor{keywordflow}{if}( \_hasVertexNormals || !AUTO\_GEN\_NORMALS ) \{}
\DoxyCodeLine{1228                     \textcolor{keywordtype}{int} fanRoot = atoi( tokens[1].c\_str() );}
\DoxyCodeLine{1229                     \textcolor{keywordtype}{int} fanA = atoi( tokens[i].c\_str() );}
\DoxyCodeLine{1230                     \textcolor{keywordtype}{int} fanB = atoi( tokens[i+1].c\_str() );}
\DoxyCodeLine{1231 }
\DoxyCodeLine{1232                     \textcolor{keywordflow}{if}( fanRoot < 0 ) fanRoot = numVertices + fanRoot + 1;}
\DoxyCodeLine{1233                     \textcolor{keywordflow}{if}( fanA < 0 ) fanA = numVertices + fanA + 1;}
\DoxyCodeLine{1234                     \textcolor{keywordflow}{if}( fanB < 0 ) fanB = numVertices + fanB + 1;}
\DoxyCodeLine{1235 }
\DoxyCodeLine{1236                     \textcolor{comment}{//regardless, we always get a vertex index.}}
\DoxyCodeLine{1237                     \_indices[ \_numIndices++ ] = fanRoot;}
\DoxyCodeLine{1238                     \_indices[ \_numIndices++ ] = fanA;}
\DoxyCodeLine{1239                     \_indices[ \_numIndices++ ] = fanB;}
\DoxyCodeLine{1240                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1241                     \textcolor{keywordtype}{int} aI = atoi( tokens[1].c\_str() );}
\DoxyCodeLine{1242                     \textcolor{keywordtype}{int} bI = atoi( tokens[i].c\_str() );}
\DoxyCodeLine{1243                     \textcolor{keywordtype}{int} cI = atoi( tokens[i+1].c\_str() );}
\DoxyCodeLine{1244 }
\DoxyCodeLine{1245                     \textcolor{keywordflow}{if}( aI < 0 ) aI = numVertices + aI + 1;}
\DoxyCodeLine{1246                     \textcolor{keywordflow}{if}( bI < 0 ) bI = numVertices + bI + 1;}
\DoxyCodeLine{1247                     \textcolor{keywordflow}{if}( cI < 0 ) cI = numVertices + cI + 1;}
\DoxyCodeLine{1248 }
\DoxyCodeLine{1249                     glm::vec3 a( vertsTemp[aI*3 + 0], vertsTemp[aI*3 + 1], vertsTemp[aI*3 + 2] );}
\DoxyCodeLine{1250                     glm::vec3 b( vertsTemp[bI*3 + 0], vertsTemp[bI*3 + 1], vertsTemp[bI*3 + 2] );}
\DoxyCodeLine{1251                     glm::vec3 c( vertsTemp[cI*3 + 0], vertsTemp[cI*3 + 1], vertsTemp[cI*3 + 2] );}
\DoxyCodeLine{1252 }
\DoxyCodeLine{1253                     glm::vec3 ab = b -\/ a;   glm::vec3 ac = c -\/ a;}
\DoxyCodeLine{1254                     glm::vec3 ba = a -\/ b; glm::vec3 bc = c -\/ b;}
\DoxyCodeLine{1255                     glm::vec3 ca = a -\/ c; glm::vec3 cb = b -\/ c;}
\DoxyCodeLine{1256 }
\DoxyCodeLine{1257                     glm::vec3 aN = glm::normalize( glm::cross( ab, ac ) );}
\DoxyCodeLine{1258                     glm::vec3 bN = glm::normalize( glm::cross( bc, ba ) );}
\DoxyCodeLine{1259                     glm::vec3 cN = glm::normalize( glm::cross( ca, cb ) );}
\DoxyCodeLine{1260 }
\DoxyCodeLine{1261                     \_vertices[ \_uniqueIndex*3 + 0 ] = a.x;}
\DoxyCodeLine{1262                     \_vertices[ \_uniqueIndex*3 + 1 ] = a.y;}
\DoxyCodeLine{1263                     \_vertices[ \_uniqueIndex*3 + 2 ] = a.z;}
\DoxyCodeLine{1264 }
\DoxyCodeLine{1265                     \_normals[ \_uniqueIndex*3 + 0 ] = aN.x;}
\DoxyCodeLine{1266                     \_normals[ \_uniqueIndex*3 + 1 ] = aN.y;}
\DoxyCodeLine{1267                     \_normals[ \_uniqueIndex*3 + 2 ] = aN.z;}
\DoxyCodeLine{1268 }
\DoxyCodeLine{1269                     \_indices[ \_numIndices++ ] = \_uniqueIndex++;}
\DoxyCodeLine{1270 }
\DoxyCodeLine{1271                     \_vertices[ \_uniqueIndex*3 + 0 ] = b.x;}
\DoxyCodeLine{1272                     \_vertices[ \_uniqueIndex*3 + 1 ] = b.y;}
\DoxyCodeLine{1273                     \_vertices[ \_uniqueIndex*3 + 2 ] = b.z;}
\DoxyCodeLine{1274 }
\DoxyCodeLine{1275                     \_normals[ \_uniqueIndex*3 + 0 ] = bN.x;}
\DoxyCodeLine{1276                     \_normals[ \_uniqueIndex*3 + 1 ] = bN.y;}
\DoxyCodeLine{1277                     \_normals[ \_uniqueIndex*3 + 2 ] = bN.z;}
\DoxyCodeLine{1278 }
\DoxyCodeLine{1279                     \_indices[ \_numIndices++ ] = \_uniqueIndex++;}
\DoxyCodeLine{1280 }
\DoxyCodeLine{1281                     \_vertices[ \_uniqueIndex*3 + 0 ] = c.x;}
\DoxyCodeLine{1282                     \_vertices[ \_uniqueIndex*3 + 1 ] = c.y;}
\DoxyCodeLine{1283                     \_vertices[ \_uniqueIndex*3 + 2 ] = c.z;}
\DoxyCodeLine{1284 }
\DoxyCodeLine{1285                     \_normals[ \_uniqueIndex*3 + 0 ] = cN.x;}
\DoxyCodeLine{1286                     \_normals[ \_uniqueIndex*3 + 1 ] = cN.y;}
\DoxyCodeLine{1287                     \_normals[ \_uniqueIndex*3 + 2 ] = cN.z;}
\DoxyCodeLine{1288 }
\DoxyCodeLine{1289                     \_indices[ \_numIndices++ ] = \_uniqueIndex++;}
\DoxyCodeLine{1290                 \}}
\DoxyCodeLine{1291             \}}
\DoxyCodeLine{1292 }
\DoxyCodeLine{1293             \textcolor{comment}{// check if RGB(A) color information is associated with face}}
\DoxyCodeLine{1294             \textcolor{comment}{// TODO: handle color info}}
\DoxyCodeLine{1295             \textcolor{comment}{//some local variables to hold the vertex+attribute indices we read in.}}
\DoxyCodeLine{1296             \textcolor{comment}{//we do it this way because we'll have to split quads into triangles ourselves.}}
\DoxyCodeLine{1297             \textcolor{comment}{// GLfloat color[4] = \{-\/1,-\/1,-\/1,1\};}}
\DoxyCodeLine{1298             \textcolor{comment}{// if( tokens.size() == numberOfVerticesInFace + 4 || tokens.size() == numberOfVerticesInFace + 5 ) \{}}
\DoxyCodeLine{1299             \textcolor{comment}{//  color[0] = atof( tokens[numberOfVerticesInFace + 1].c\_str() );}}
\DoxyCodeLine{1300             \textcolor{comment}{//  color[1] = atof( tokens[numberOfVerticesInFace + 2].c\_str() );}}
\DoxyCodeLine{1301             \textcolor{comment}{//  color[2] = atof( tokens[numberOfVerticesInFace + 3].c\_str() );}}
\DoxyCodeLine{1302             \textcolor{comment}{//  color[3] = 1;}}
\DoxyCodeLine{1303       \textcolor{comment}{//}}
\DoxyCodeLine{1304             \textcolor{comment}{//  if( tokens.size() == numberOfVerticesInFace + 5 )}}
\DoxyCodeLine{1305             \textcolor{comment}{//      color[3] = atof( tokens[numberOfVerticesInFace + 4].c\_str() );}}
\DoxyCodeLine{1306             \textcolor{comment}{// \}}}
\DoxyCodeLine{1307 }
\DoxyCodeLine{1308         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1309 }
\DoxyCodeLine{1310         \}}
\DoxyCodeLine{1311 }
\DoxyCodeLine{1312         \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{1313             progressCounter++;}
\DoxyCodeLine{1314             \textcolor{keywordflow}{if}( progressCounter \% 5000 == 0 ) \{}
\DoxyCodeLine{1315                 printf(\textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}});}
\DoxyCodeLine{1316                 \textcolor{keywordflow}{switch}( progressCounter ) \{}
\DoxyCodeLine{1317                     \textcolor{keywordflow}{case} 5000:  printf(\textcolor{stringliteral}{"{}[.off]: parsing \%s...\(\backslash\)\(\backslash\)"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{1318                     \textcolor{keywordflow}{case} 10000: printf(\textcolor{stringliteral}{"{}[.off]: parsing \%s...|"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{1319                     \textcolor{keywordflow}{case} 15000: printf(\textcolor{stringliteral}{"{}[.off]: parsing \%s.../"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{1320                     \textcolor{keywordflow}{case} 20000: printf(\textcolor{stringliteral}{"{}[.off]: parsing \%s...-\/"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{1321                 \}}
\DoxyCodeLine{1322                 fflush(stdout);}
\DoxyCodeLine{1323             \}}
\DoxyCodeLine{1324             \textcolor{keywordflow}{if}( progressCounter == 20000 )}
\DoxyCodeLine{1325                 progressCounter = 0;}
\DoxyCodeLine{1326         \}}
\DoxyCodeLine{1327     \}}
\DoxyCodeLine{1328     in.close();}
\DoxyCodeLine{1329 }
\DoxyCodeLine{1330     glBindVertexArray( \_vaod );}
\DoxyCodeLine{1331     glBindBuffer( GL\_ARRAY\_BUFFER, \_vbods[0] );}
\DoxyCodeLine{1332     glBufferData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 8, NULL, GL\_STATIC\_DRAW );}
\DoxyCodeLine{1333     glBufferSubData( GL\_ARRAY\_BUFFER, 0,                                                                  \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \_vertices );}
\DoxyCodeLine{1334     glBufferSubData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \_normals );}
\DoxyCodeLine{1335     glBufferSubData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 6, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 2, \_texCoords );}
\DoxyCodeLine{1336 }
\DoxyCodeLine{1337     glBindBuffer( GL\_ELEMENT\_ARRAY\_BUFFER, \_vbods[1] );}
\DoxyCodeLine{1338     glBufferData( GL\_ELEMENT\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLuint) * \_numIndices, \_indices, GL\_STATIC\_DRAW );}
\DoxyCodeLine{1339 }
\DoxyCodeLine{1340     time(\&end);}
\DoxyCodeLine{1341     \textcolor{keywordtype}{double} seconds = difftime( end, start );}
\DoxyCodeLine{1342 }
\DoxyCodeLine{1343     \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{1344         printf( \textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}} );}
\DoxyCodeLine{1345         printf( \textcolor{stringliteral}{"{}[.off]: parsing \%s...done!  (Time: \%.1fs)\(\backslash\)n"{}}, \_filename, seconds );}
\DoxyCodeLine{1346         printf( \textcolor{stringliteral}{"{}[.off]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1347     \}}
\DoxyCodeLine{1348 }
\DoxyCodeLine{1349     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1350 \}}
\DoxyCodeLine{1351 }
\DoxyCodeLine{1352 \textcolor{comment}{// notes on PLY format: http://paulbourke.net/dataformats/ply/}}
\DoxyCodeLine{1353 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} CSCI441::ModelLoader::\_loadPLYFile( \textcolor{keywordtype}{bool} INFO, \textcolor{keywordtype}{bool} ERRORS ) \{}
\DoxyCodeLine{1354     \textcolor{keywordtype}{bool} result = \textcolor{keyword}{true};}
\DoxyCodeLine{1355 }
\DoxyCodeLine{1356     \textcolor{keywordflow}{if} (INFO ) printf( \textcolor{stringliteral}{"{}[.ply]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/ BEGIN \%s Info -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1357 }
\DoxyCodeLine{1358     time\_t start, end;}
\DoxyCodeLine{1359     time(\&start);}
\DoxyCodeLine{1360 }
\DoxyCodeLine{1361     std::ifstream in( \_filename );}
\DoxyCodeLine{1362     \textcolor{keywordflow}{if}( !in.is\_open() ) \{}
\DoxyCodeLine{1363         \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.ply]: [ERROR]: Could not open \(\backslash\)"{}\%s\(\backslash\)"{}\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1364         \textcolor{keywordflow}{if} ( INFO ) printf( \textcolor{stringliteral}{"{}[.ply]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1365         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1366     \}}
\DoxyCodeLine{1367 }
\DoxyCodeLine{1368     GLuint numVertices = 0, numFaces = 0, numTriangles = 0, numMaterials = 0;}
\DoxyCodeLine{1369     \textcolor{keywordtype}{float} minX = 999999, maxX = -\/999999, minY = 999999, maxY = -\/999999, minZ = 999999, maxZ = -\/999999;}
\DoxyCodeLine{1370     std::string line;}
\DoxyCodeLine{1371 }
\DoxyCodeLine{1372     \textcolor{keyword}{enum} PLY\_FILE\_STATE \{ HEADER, VERTICES, FACES, MATERIALS \};}
\DoxyCodeLine{1373     \textcolor{keyword}{enum} PLY\_ELEMENT\_TYPE \{ NONE, VERTEX, FACE, MATERIAL \};}
\DoxyCodeLine{1374 }
\DoxyCodeLine{1375     PLY\_FILE\_STATE fileState = HEADER;}
\DoxyCodeLine{1376     PLY\_ELEMENT\_TYPE elemType = NONE;}
\DoxyCodeLine{1377 }
\DoxyCodeLine{1378     GLuint progressCounter = 0;}
\DoxyCodeLine{1379     GLuint vSeen = 0;}
\DoxyCodeLine{1380 }
\DoxyCodeLine{1381     \textcolor{keywordflow}{while}( getline( in, line ) ) \{}
\DoxyCodeLine{1382         \textcolor{keywordflow}{if}( line.length() > 1 \&\& line.at(0) == \textcolor{charliteral}{'\(\backslash\)t'} )}
\DoxyCodeLine{1383             line = line.substr( 1 );}
\DoxyCodeLine{1384         line.erase( line.find\_last\_not\_of( \textcolor{stringliteral}{"{} \(\backslash\)n\(\backslash\)r\(\backslash\)t"{}} ) + 1 );}
\DoxyCodeLine{1385 }
\DoxyCodeLine{1386         std::vector< std::string > tokens = \_tokenizeString( line, \textcolor{stringliteral}{"{} \(\backslash\)t"{}} );}
\DoxyCodeLine{1387 }
\DoxyCodeLine{1388         \textcolor{keywordflow}{if}( tokens.size() < 1 ) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1389 }
\DoxyCodeLine{1390         \textcolor{comment}{//the line should have a single character that lets us know if it's a...}}
\DoxyCodeLine{1391         \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}comment"{}} ) ) \{                             \textcolor{comment}{// comment ignore}}
\DoxyCodeLine{1392         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == HEADER ) \{}
\DoxyCodeLine{1393             \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}ply"{}} ) ) \{                 \textcolor{comment}{// denotes ply File type}}
\DoxyCodeLine{1394             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}format"{}} ) ) \{}
\DoxyCodeLine{1395                 \textcolor{keywordflow}{if}( tokens[1].compare( \textcolor{stringliteral}{"{}ascii"{}} ) ) \{}
\DoxyCodeLine{1396                     \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.ply]: [ERROR]: File \(\backslash\)"{}\%s\(\backslash\)"{} not ASCII format\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1397                     \textcolor{keywordflow}{if} ( INFO ) printf( \textcolor{stringliteral}{"{}[.ply]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1398                     in.close();}
\DoxyCodeLine{1399                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1400                 \}}
\DoxyCodeLine{1401             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}element"{}} ) ) \{      \textcolor{comment}{// an element (vertex, face, material)}}
\DoxyCodeLine{1402                 \textcolor{keywordflow}{if}( !tokens[1].compare( \textcolor{stringliteral}{"{}vertex"{}} ) ) \{}
\DoxyCodeLine{1403                     numVertices = atoi( tokens[2].c\_str() );}
\DoxyCodeLine{1404                     elemType = VERTEX;}
\DoxyCodeLine{1405                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[1].compare( \textcolor{stringliteral}{"{}face"{}} ) ) \{}
\DoxyCodeLine{1406                     numFaces = atoi( tokens[2].c\_str() );}
\DoxyCodeLine{1407                     elemType = FACE;}
\DoxyCodeLine{1408                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[1].compare( \textcolor{stringliteral}{"{}edge"{}} ) ) \{}
\DoxyCodeLine{1409 }
\DoxyCodeLine{1410                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[1].compare( \textcolor{stringliteral}{"{}material"{}} ) ) \{}
\DoxyCodeLine{1411                     numMaterials = atoi( tokens[2].c\_str() );}
\DoxyCodeLine{1412                     elemType = MATERIAL;}
\DoxyCodeLine{1413                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1414 }
\DoxyCodeLine{1415                 \}}
\DoxyCodeLine{1416             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}property"{}} ) ) \{}
\DoxyCodeLine{1417                 \textcolor{keywordflow}{if}( elemType == VERTEX ) \{}
\DoxyCodeLine{1418 }
\DoxyCodeLine{1419                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( elemType == FACE ) \{}
\DoxyCodeLine{1420 }
\DoxyCodeLine{1421                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( elemType == MATERIAL ) \{}
\DoxyCodeLine{1422 }
\DoxyCodeLine{1423                 \}}
\DoxyCodeLine{1424             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}end\_header"{}} ) ) \{   \textcolor{comment}{// end of the header section}}
\DoxyCodeLine{1425                 fileState = VERTICES;}
\DoxyCodeLine{1426             \}}
\DoxyCodeLine{1427         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == VERTICES ) \{}
\DoxyCodeLine{1428             \textcolor{comment}{// read in x y z vertex location}}
\DoxyCodeLine{1429             \textcolor{keywordtype}{float} x = atof( tokens[0].c\_str() ),}
\DoxyCodeLine{1430                         y = atof( tokens[1].c\_str() ),}
\DoxyCodeLine{1431                         z = atof( tokens[2].c\_str() );}
\DoxyCodeLine{1432 }
\DoxyCodeLine{1433             \textcolor{keywordflow}{if}( x < minX ) minX = x;}
\DoxyCodeLine{1434             \textcolor{keywordflow}{if}( x > maxX ) maxX = x;}
\DoxyCodeLine{1435             \textcolor{keywordflow}{if}( y < minY ) minY = y;}
\DoxyCodeLine{1436             \textcolor{keywordflow}{if}( y > maxY ) maxY = y;}
\DoxyCodeLine{1437             \textcolor{keywordflow}{if}( z < minZ ) minZ = z;}
\DoxyCodeLine{1438             \textcolor{keywordflow}{if}( z > maxZ ) maxZ = z;}
\DoxyCodeLine{1439 }
\DoxyCodeLine{1440             vSeen++;}
\DoxyCodeLine{1441             \textcolor{comment}{// if all vertices have been read in, move on to faces}}
\DoxyCodeLine{1442             \textcolor{keywordflow}{if}( vSeen == numVertices )}
\DoxyCodeLine{1443                 fileState = FACES;}
\DoxyCodeLine{1444         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == FACES ) \{}
\DoxyCodeLine{1445             GLuint numberOfVerticesInFace = atoi( tokens[0].c\_str() );}
\DoxyCodeLine{1446             numTriangles += numberOfVerticesInFace -\/ 3 + 1;}
\DoxyCodeLine{1447         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1448             \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.ply]: unknown file state: \%d\(\backslash\)n"{}}, fileState );}
\DoxyCodeLine{1449         \}}
\DoxyCodeLine{1450 }
\DoxyCodeLine{1451         \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{1452             progressCounter++;}
\DoxyCodeLine{1453             \textcolor{keywordflow}{if}( progressCounter \% 5000 == 0 ) \{}
\DoxyCodeLine{1454                 printf(\textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}});}
\DoxyCodeLine{1455                 \textcolor{keywordflow}{switch}( progressCounter ) \{}
\DoxyCodeLine{1456                     \textcolor{keywordflow}{case} 5000:  printf(\textcolor{stringliteral}{"{}[.ply]: scanning \%s...\(\backslash\)\(\backslash\)"{}}, \_filename);  \textcolor{keywordflow}{break};}
\DoxyCodeLine{1457                     \textcolor{keywordflow}{case} 10000: printf(\textcolor{stringliteral}{"{}[.ply]: scanning \%s...|"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{1458                     \textcolor{keywordflow}{case} 15000: printf(\textcolor{stringliteral}{"{}[.ply]: scanning \%s.../"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{1459                     \textcolor{keywordflow}{case} 20000: printf(\textcolor{stringliteral}{"{}[.ply]: scanning \%s...-\/"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{1460                 \}}
\DoxyCodeLine{1461                 fflush(stdout);}
\DoxyCodeLine{1462             \}}
\DoxyCodeLine{1463             \textcolor{keywordflow}{if}( progressCounter == 20000 )}
\DoxyCodeLine{1464                 progressCounter = 0;}
\DoxyCodeLine{1465         \}}
\DoxyCodeLine{1466     \}}
\DoxyCodeLine{1467     in.close();}
\DoxyCodeLine{1468 }
\DoxyCodeLine{1469     \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{1470         printf( \textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}} );}
\DoxyCodeLine{1471         printf( \textcolor{stringliteral}{"{}[.ply]: scanning \%s...done!\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1472         printf( \textcolor{stringliteral}{"{}[.ply]: -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}} );}
\DoxyCodeLine{1473         printf( \textcolor{stringliteral}{"{}[.ply]: Model Stats:\(\backslash\)n"{}} );}
\DoxyCodeLine{1474         printf( \textcolor{stringliteral}{"{}[.ply]: Vertices:  \(\backslash\)t\%u\(\backslash\)tNormals:   \(\backslash\)t\%u\(\backslash\)tTex Coords:\(\backslash\)t\%u\(\backslash\)n"{}}, numVertices, 0, 0 );}
\DoxyCodeLine{1475         printf( \textcolor{stringliteral}{"{}[.ply]: Faces:     \(\backslash\)t\%u\(\backslash\)tTriangles: \(\backslash\)t\%u\(\backslash\)n"{}}, numFaces, numTriangles );}
\DoxyCodeLine{1476         printf( \textcolor{stringliteral}{"{}[.ply]: Dimensions:\(\backslash\)t(\%f, \%f, \%f)\(\backslash\)n"{}}, (maxX -\/ minX), (maxY -\/ minY), (maxZ -\/ minZ) );}
\DoxyCodeLine{1477     \}}
\DoxyCodeLine{1478 }
\DoxyCodeLine{1479     \textcolor{keywordflow}{if}( \_hasVertexNormals || !AUTO\_GEN\_NORMALS ) \{}
\DoxyCodeLine{1480         \textcolor{keywordflow}{if} (INFO \&\& !\_hasVertexNormals)}
\DoxyCodeLine{1481             printf( \textcolor{stringliteral}{"{}[.ply]: [WARN]: No vertex normals exist on model.  To autogenerate vertex\(\backslash\)n\(\backslash\)tnormals, call CSCI441::ModelLoader::enableAutoGenerateNormals()\(\backslash\)n\(\backslash\)tprior to loading the model file.\(\backslash\)n"{}} );}
\DoxyCodeLine{1482         \_vertices = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numVertices * 3);}
\DoxyCodeLine{1483         \_texCoords = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numVertices * 2);}
\DoxyCodeLine{1484         \_normals = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numVertices * 3);}
\DoxyCodeLine{1485         \_indices = (GLuint*)malloc(\textcolor{keyword}{sizeof}(GLuint) * numTriangles * 3);}
\DoxyCodeLine{1486     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1487         \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.ply]: No vertex normals exist on model, vertex normals will be autogenerated\(\backslash\)n"{}} );}
\DoxyCodeLine{1488         \_vertices = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numTriangles * 3 * 3);}
\DoxyCodeLine{1489         \_texCoords = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numTriangles * 3 * 2);}
\DoxyCodeLine{1490         \_normals = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numTriangles * 3 * 3);}
\DoxyCodeLine{1491         \_indices = (GLuint*)malloc(\textcolor{keyword}{sizeof}(GLuint) * numTriangles * 3);}
\DoxyCodeLine{1492     \}}
\DoxyCodeLine{1493 }
\DoxyCodeLine{1494     \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.ply]: -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}} );}
\DoxyCodeLine{1495 }
\DoxyCodeLine{1496     std::vector<GLfloat> vertsTemp;}
\DoxyCodeLine{1497 }
\DoxyCodeLine{1498     in.open( \_filename );}
\DoxyCodeLine{1499 }
\DoxyCodeLine{1500     \_uniqueIndex = 0;}
\DoxyCodeLine{1501     \_numIndices = 0;}
\DoxyCodeLine{1502 }
\DoxyCodeLine{1503     fileState = HEADER;}
\DoxyCodeLine{1504     elemType = NONE;}
\DoxyCodeLine{1505 }
\DoxyCodeLine{1506     progressCounter = 0;}
\DoxyCodeLine{1507     vSeen = 0;}
\DoxyCodeLine{1508 }
\DoxyCodeLine{1509     \textcolor{keywordflow}{while}( getline( in, line ) ) \{}
\DoxyCodeLine{1510         \textcolor{keywordflow}{if}( line.length() > 1 \&\& line.at(0) == \textcolor{charliteral}{'\(\backslash\)t'} )}
\DoxyCodeLine{1511             line = line.substr( 1 );}
\DoxyCodeLine{1512         line.erase( line.find\_last\_not\_of( \textcolor{stringliteral}{"{} \(\backslash\)n\(\backslash\)r\(\backslash\)t"{}} ) + 1 );}
\DoxyCodeLine{1513 }
\DoxyCodeLine{1514         std::vector< std::string > tokens = \_tokenizeString( line, \textcolor{stringliteral}{"{} \(\backslash\)t"{}} );}
\DoxyCodeLine{1515 }
\DoxyCodeLine{1516         \textcolor{keywordflow}{if}( tokens.size() < 1 ) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1517 }
\DoxyCodeLine{1518         \textcolor{comment}{//the line should have a single character that lets us know if it's a...}}
\DoxyCodeLine{1519         \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}comment"{}} ) ) \{                             \textcolor{comment}{// comment ignore}}
\DoxyCodeLine{1520         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == HEADER ) \{}
\DoxyCodeLine{1521             \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}ply"{}} ) ) \{                 \textcolor{comment}{// denotes ply File type}}
\DoxyCodeLine{1522             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}format"{}} ) ) \{}
\DoxyCodeLine{1523                 \textcolor{keywordflow}{if}( tokens[1].compare( \textcolor{stringliteral}{"{}ascii"{}} ) ) \{}
\DoxyCodeLine{1524                     \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.ply]: [ERROR]: File \(\backslash\)"{}\%s\(\backslash\)"{} not ASCII format\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1525                     \textcolor{keywordflow}{if} ( INFO ) printf( \textcolor{stringliteral}{"{}[.ply]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1526                     in.close();}
\DoxyCodeLine{1527                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1528                 \}}
\DoxyCodeLine{1529             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}element"{}} ) ) \{      \textcolor{comment}{// an element (vertex, face, material)}}
\DoxyCodeLine{1530                 \textcolor{keywordflow}{if}( !tokens[1].compare( \textcolor{stringliteral}{"{}vertex"{}} ) ) \{}
\DoxyCodeLine{1531                     numVertices = atoi( tokens[2].c\_str() );}
\DoxyCodeLine{1532                     elemType = VERTEX;}
\DoxyCodeLine{1533                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[1].compare( \textcolor{stringliteral}{"{}face"{}} ) ) \{}
\DoxyCodeLine{1534                     numFaces = atoi( tokens[2].c\_str() );}
\DoxyCodeLine{1535                     elemType = FACE;}
\DoxyCodeLine{1536                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[1].compare( \textcolor{stringliteral}{"{}edge"{}} ) ) \{}
\DoxyCodeLine{1537 }
\DoxyCodeLine{1538                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[1].compare( \textcolor{stringliteral}{"{}material"{}} ) ) \{}
\DoxyCodeLine{1539                     numMaterials = atoi( tokens[2].c\_str() );}
\DoxyCodeLine{1540                     elemType = MATERIAL;}
\DoxyCodeLine{1541                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1542 }
\DoxyCodeLine{1543                 \}}
\DoxyCodeLine{1544             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}property"{}} ) ) \{}
\DoxyCodeLine{1545                 \textcolor{keywordflow}{if}( elemType == VERTEX ) \{}
\DoxyCodeLine{1546 }
\DoxyCodeLine{1547                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( elemType == FACE ) \{}
\DoxyCodeLine{1548 }
\DoxyCodeLine{1549                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( elemType == MATERIAL ) \{}
\DoxyCodeLine{1550 }
\DoxyCodeLine{1551                 \}}
\DoxyCodeLine{1552             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}end\_header"{}} ) ) \{   \textcolor{comment}{// end of the header section}}
\DoxyCodeLine{1553                 fileState = VERTICES;}
\DoxyCodeLine{1554             \}}
\DoxyCodeLine{1555         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == VERTICES ) \{}
\DoxyCodeLine{1556             \textcolor{comment}{// read in x y z vertex location}}
\DoxyCodeLine{1557             \textcolor{keywordtype}{float} x = atof( tokens[0].c\_str() ),}
\DoxyCodeLine{1558                         y = atof( tokens[1].c\_str() ),}
\DoxyCodeLine{1559                         z = atof( tokens[2].c\_str() );}
\DoxyCodeLine{1560 }
\DoxyCodeLine{1561             \textcolor{keywordflow}{if}( \_hasVertexNormals || !AUTO\_GEN\_NORMALS ) \{}
\DoxyCodeLine{1562                 \_vertices[ \_uniqueIndex*3 + 0 ] = x;}
\DoxyCodeLine{1563                 \_vertices[ \_uniqueIndex*3 + 1 ] = y;}
\DoxyCodeLine{1564                 \_vertices[ \_uniqueIndex*3 + 2 ] = z;}
\DoxyCodeLine{1565 }
\DoxyCodeLine{1566                 \_uniqueIndex++;}
\DoxyCodeLine{1567             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1568                 vertsTemp.push\_back( x );}
\DoxyCodeLine{1569                 vertsTemp.push\_back( y );}
\DoxyCodeLine{1570                 vertsTemp.push\_back( z );}
\DoxyCodeLine{1571 }
\DoxyCodeLine{1572                 vSeen++;}
\DoxyCodeLine{1573             \}}
\DoxyCodeLine{1574             \textcolor{comment}{// if all vertices have been read in, move on to faces}}
\DoxyCodeLine{1575             \textcolor{keywordflow}{if}( \_uniqueIndex == numVertices || vSeen == numVertices )}
\DoxyCodeLine{1576                 fileState = FACES;}
\DoxyCodeLine{1577         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( fileState == FACES ) \{}
\DoxyCodeLine{1578             GLuint numberOfVerticesInFace = atoi( tokens[0].c\_str() );}
\DoxyCodeLine{1579 }
\DoxyCodeLine{1580             \textcolor{keywordflow}{for}( GLuint i = 2; i <= numberOfVerticesInFace -\/ 1; i++ ) \{}
\DoxyCodeLine{1581                 \textcolor{keywordflow}{if}( \_hasVertexNormals || !AUTO\_GEN\_NORMALS ) \{}
\DoxyCodeLine{1582                     \_indices[ \_numIndices++ ] = atoi( tokens[1].c\_str() );}
\DoxyCodeLine{1583                     \_indices[ \_numIndices++ ] = atoi( tokens[i].c\_str() );}
\DoxyCodeLine{1584                     \_indices[ \_numIndices++ ] = atoi( tokens[i+1].c\_str() );}
\DoxyCodeLine{1585                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1586                     GLuint aI = atoi( tokens[1].c\_str() );}
\DoxyCodeLine{1587                     GLuint bI = atoi( tokens[i].c\_str() );}
\DoxyCodeLine{1588                     GLuint cI = atoi( tokens[i+1].c\_str() );}
\DoxyCodeLine{1589 }
\DoxyCodeLine{1590                     glm::vec3 a( vertsTemp[aI*3 + 0], vertsTemp[aI*3 + 1], vertsTemp[aI*3 + 2] );}
\DoxyCodeLine{1591                     glm::vec3 b( vertsTemp[bI*3 + 0], vertsTemp[bI*3 + 1], vertsTemp[bI*3 + 2] );}
\DoxyCodeLine{1592                     glm::vec3 c( vertsTemp[cI*3 + 0], vertsTemp[cI*3 + 1], vertsTemp[cI*3 + 2] );}
\DoxyCodeLine{1593 }
\DoxyCodeLine{1594                     glm::vec3 ab = b -\/ a;   glm::vec3 ac = c -\/ a;}
\DoxyCodeLine{1595                     glm::vec3 ba = a -\/ b; glm::vec3 bc = c -\/ b;}
\DoxyCodeLine{1596                     glm::vec3 ca = a -\/ c; glm::vec3 cb = b -\/ c;}
\DoxyCodeLine{1597 }
\DoxyCodeLine{1598                     glm::vec3 aN = glm::normalize( glm::cross( ab, ac ) );}
\DoxyCodeLine{1599                     glm::vec3 bN = glm::normalize( glm::cross( bc, ba ) );}
\DoxyCodeLine{1600                     glm::vec3 cN = glm::normalize( glm::cross( ca, cb ) );}
\DoxyCodeLine{1601 }
\DoxyCodeLine{1602                     \_vertices[ \_uniqueIndex*3 + 0 ] = a.x;}
\DoxyCodeLine{1603                     \_vertices[ \_uniqueIndex*3 + 1 ] = a.y;}
\DoxyCodeLine{1604                     \_vertices[ \_uniqueIndex*3 + 2 ] = a.z;}
\DoxyCodeLine{1605 }
\DoxyCodeLine{1606                     \_normals[ \_uniqueIndex*3 + 0 ] = aN.x;}
\DoxyCodeLine{1607                     \_normals[ \_uniqueIndex*3 + 1 ] = aN.y;}
\DoxyCodeLine{1608                     \_normals[ \_uniqueIndex*3 + 2 ] = aN.z;}
\DoxyCodeLine{1609 }
\DoxyCodeLine{1610                     \_indices[ \_numIndices++ ] = \_uniqueIndex++;}
\DoxyCodeLine{1611 }
\DoxyCodeLine{1612                     \_vertices[ \_uniqueIndex*3 + 0 ] = b.x;}
\DoxyCodeLine{1613                     \_vertices[ \_uniqueIndex*3 + 1 ] = b.y;}
\DoxyCodeLine{1614                     \_vertices[ \_uniqueIndex*3 + 2 ] = b.z;}
\DoxyCodeLine{1615 }
\DoxyCodeLine{1616                     \_normals[ \_uniqueIndex*3 + 0 ] = bN.x;}
\DoxyCodeLine{1617                     \_normals[ \_uniqueIndex*3 + 1 ] = bN.y;}
\DoxyCodeLine{1618                     \_normals[ \_uniqueIndex*3 + 2 ] = bN.z;}
\DoxyCodeLine{1619 }
\DoxyCodeLine{1620                     \_indices[ \_numIndices++ ] = \_uniqueIndex++;}
\DoxyCodeLine{1621 }
\DoxyCodeLine{1622                     \_vertices[ \_uniqueIndex*3 + 0 ] = c.x;}
\DoxyCodeLine{1623                     \_vertices[ \_uniqueIndex*3 + 1 ] = c.y;}
\DoxyCodeLine{1624                     \_vertices[ \_uniqueIndex*3 + 2 ] = c.z;}
\DoxyCodeLine{1625 }
\DoxyCodeLine{1626                     \_normals[ \_uniqueIndex*3 + 0 ] = cN.x;}
\DoxyCodeLine{1627                     \_normals[ \_uniqueIndex*3 + 1 ] = cN.y;}
\DoxyCodeLine{1628                     \_normals[ \_uniqueIndex*3 + 2 ] = cN.z;}
\DoxyCodeLine{1629 }
\DoxyCodeLine{1630                     \_indices[ \_numIndices++ ] = \_uniqueIndex++;}
\DoxyCodeLine{1631                 \}}
\DoxyCodeLine{1632             \}}
\DoxyCodeLine{1633         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1634             \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.ply]: unknown file state: \%d\(\backslash\)n"{}}, fileState );}
\DoxyCodeLine{1635         \}}
\DoxyCodeLine{1636 }
\DoxyCodeLine{1637         \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{1638             progressCounter++;}
\DoxyCodeLine{1639             \textcolor{keywordflow}{if}( progressCounter \% 5000 == 0 ) \{}
\DoxyCodeLine{1640                 printf(\textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}});}
\DoxyCodeLine{1641                 \textcolor{keywordflow}{switch}( progressCounter ) \{}
\DoxyCodeLine{1642                     \textcolor{keywordflow}{case} 5000:  printf(\textcolor{stringliteral}{"{}[.ply]: parsing \%s...\(\backslash\)\(\backslash\)"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{1643                     \textcolor{keywordflow}{case} 10000: printf(\textcolor{stringliteral}{"{}[.ply]: parsing \%s...|"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{1644                     \textcolor{keywordflow}{case} 15000: printf(\textcolor{stringliteral}{"{}[.ply]: parsing \%s.../"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{1645                     \textcolor{keywordflow}{case} 20000: printf(\textcolor{stringliteral}{"{}[.ply]: parsing \%s...-\/"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{1646                 \}}
\DoxyCodeLine{1647                 fflush(stdout);}
\DoxyCodeLine{1648             \}}
\DoxyCodeLine{1649             \textcolor{keywordflow}{if}( progressCounter == 20000 )}
\DoxyCodeLine{1650                 progressCounter = 0;}
\DoxyCodeLine{1651         \}}
\DoxyCodeLine{1652     \}}
\DoxyCodeLine{1653     in.close();}
\DoxyCodeLine{1654 }
\DoxyCodeLine{1655     glBindVertexArray( \_vaod );}
\DoxyCodeLine{1656     glBindBuffer( GL\_ARRAY\_BUFFER, \_vbods[0] );}
\DoxyCodeLine{1657     glBufferData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 8, NULL, GL\_STATIC\_DRAW );}
\DoxyCodeLine{1658     glBufferSubData( GL\_ARRAY\_BUFFER, 0,                                                                  \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \_vertices );}
\DoxyCodeLine{1659     glBufferSubData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \_normals );}
\DoxyCodeLine{1660     glBufferSubData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 6, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 2, \_texCoords );}
\DoxyCodeLine{1661 }
\DoxyCodeLine{1662     glBindBuffer( GL\_ELEMENT\_ARRAY\_BUFFER, \_vbods[1] );}
\DoxyCodeLine{1663     glBufferData( GL\_ELEMENT\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLuint) * \_numIndices, \_indices, GL\_STATIC\_DRAW );}
\DoxyCodeLine{1664 }
\DoxyCodeLine{1665     time(\&end);}
\DoxyCodeLine{1666     \textcolor{keywordtype}{double} seconds = difftime( end, start );}
\DoxyCodeLine{1667 }
\DoxyCodeLine{1668     \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{1669         printf( \textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}} );}
\DoxyCodeLine{1670         printf( \textcolor{stringliteral}{"{}[.ply]: parsing \%s...done!\(\backslash\)n[.ply]: Time to complete: \%.3fs\(\backslash\)n"{}}, \_filename, seconds );}
\DoxyCodeLine{1671         printf( \textcolor{stringliteral}{"{}[.ply]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1672     \}}
\DoxyCodeLine{1673 }
\DoxyCodeLine{1674     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1675 \}}
\DoxyCodeLine{1676 }
\DoxyCodeLine{1677 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} CSCI441::ModelLoader::\_loadSTLFile( \textcolor{keywordtype}{bool} INFO, \textcolor{keywordtype}{bool} ERRORS ) \{}
\DoxyCodeLine{1678     \textcolor{keywordtype}{bool} result = \textcolor{keyword}{true};}
\DoxyCodeLine{1679 }
\DoxyCodeLine{1680     \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.stl]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/ BEGIN \%s Info -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1681 }
\DoxyCodeLine{1682     time\_t start, end;}
\DoxyCodeLine{1683     time(\&start);}
\DoxyCodeLine{1684 }
\DoxyCodeLine{1685     std::ifstream in( \_filename );}
\DoxyCodeLine{1686     \textcolor{keywordflow}{if}( !in.is\_open() ) \{}
\DoxyCodeLine{1687         \textcolor{keywordflow}{if} (ERRORS) fprintf(stderr, \textcolor{stringliteral}{"{}[.stl]: [ERROR]: Could not open \(\backslash\)"{}\%s\(\backslash\)"{}\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1688         \textcolor{keywordflow}{if} ( INFO ) printf( \textcolor{stringliteral}{"{}[.stl]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1689         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1690     \}}
\DoxyCodeLine{1691 }
\DoxyCodeLine{1692     GLuint numVertices = 0, numNormals = 0, numFaces = 0, numTriangles = 0, numVertsInLoop = 0;}
\DoxyCodeLine{1693     \textcolor{keywordtype}{float} minX = 999999, maxX = -\/999999, minY = 999999, maxY = -\/999999, minZ = 999999, maxZ = -\/999999;}
\DoxyCodeLine{1694     std::string line;}
\DoxyCodeLine{1695 }
\DoxyCodeLine{1696     \textcolor{keywordtype}{int} progressCounter = 0;}
\DoxyCodeLine{1697     GLfloat normalVector[3] = \{0,0,0\};}
\DoxyCodeLine{1698 }
\DoxyCodeLine{1699     \textcolor{keywordflow}{while}( getline( in, line ) ) \{}
\DoxyCodeLine{1700         \textcolor{keywordflow}{if}( line.length() > 1 \&\& line.at(0) == \textcolor{charliteral}{'\(\backslash\)t'} )}
\DoxyCodeLine{1701             line = line.substr( 1 );}
\DoxyCodeLine{1702         line.erase( line.find\_last\_not\_of( \textcolor{stringliteral}{"{} \(\backslash\)n\(\backslash\)r\(\backslash\)t"{}} ) + 1 );}
\DoxyCodeLine{1703 }
\DoxyCodeLine{1704         std::vector< std::string > tokens = \_tokenizeString( line, \textcolor{stringliteral}{"{} \(\backslash\)t"{}} );}
\DoxyCodeLine{1705 }
\DoxyCodeLine{1706         \textcolor{keywordflow}{if}( tokens.size() < 1 ) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1707 }
\DoxyCodeLine{1708         \textcolor{comment}{//the line should have a single character that lets us know if it's a...}}
\DoxyCodeLine{1709         \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}solid"{}} ) ) \{}
\DoxyCodeLine{1710         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}facet"{}} ) ) \{}
\DoxyCodeLine{1711             \textcolor{comment}{/* read in x y z triangle normal */}}
\DoxyCodeLine{1712             numNormals++;}
\DoxyCodeLine{1713         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}outer"{}} ) \&\& !tokens[1].compare( \textcolor{stringliteral}{"{}loop"{}} ) ) \{}
\DoxyCodeLine{1714             \textcolor{comment}{// begin a primitive}}
\DoxyCodeLine{1715             numVertsInLoop = 0;}
\DoxyCodeLine{1716         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}vertex"{}} ) ) \{}
\DoxyCodeLine{1717             \textcolor{keywordtype}{float} x = atof( tokens[1].c\_str() ),}
\DoxyCodeLine{1718                     y = atof( tokens[2].c\_str() ),}
\DoxyCodeLine{1719                     z = atof( tokens[3].c\_str() );}
\DoxyCodeLine{1720 }
\DoxyCodeLine{1721             \textcolor{keywordflow}{if}( x < minX ) minX = x;}
\DoxyCodeLine{1722             \textcolor{keywordflow}{if}( x > maxX ) maxX = x;}
\DoxyCodeLine{1723             \textcolor{keywordflow}{if}( y < minY ) minY = y;}
\DoxyCodeLine{1724             \textcolor{keywordflow}{if}( y > maxY ) maxY = y;}
\DoxyCodeLine{1725             \textcolor{keywordflow}{if}( z < minZ ) minZ = z;}
\DoxyCodeLine{1726             \textcolor{keywordflow}{if}( z > maxZ ) maxZ = z;}
\DoxyCodeLine{1727 }
\DoxyCodeLine{1728             numVertices++;}
\DoxyCodeLine{1729             numVertsInLoop++;}
\DoxyCodeLine{1730         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}endloop"{}} ) ) \{}
\DoxyCodeLine{1731             \textcolor{comment}{// end primitive}}
\DoxyCodeLine{1732             numTriangles += numVertsInLoop -\/ 3 + 1;}
\DoxyCodeLine{1733         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}endfacet"{}} ) ) \{}
\DoxyCodeLine{1734             numFaces++;}
\DoxyCodeLine{1735         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}endsolid"{}} ) ) \{}
\DoxyCodeLine{1736 }
\DoxyCodeLine{1737         \}}
\DoxyCodeLine{1738         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1739             \textcolor{keywordflow}{if}( memchr( line.c\_str(), \textcolor{charliteral}{'\(\backslash\)0'}, line.length() ) != NULL ) \{}
\DoxyCodeLine{1740                 \textcolor{keywordflow}{if} (ERRORS) fprintf( stderr, \textcolor{stringliteral}{"{}[.stl]: [ERROR]: Cannot read binary STL file \(\backslash\)"{}\%s\(\backslash\)"{}\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1741                 \textcolor{keywordflow}{if} ( INFO ) printf( \textcolor{stringliteral}{"{}[.stl]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1742                 in.close();}
\DoxyCodeLine{1743                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{1744             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.stl]: unknown line: \%s\(\backslash\)n"{}}, line.c\_str() );}
\DoxyCodeLine{1745         \}}
\DoxyCodeLine{1746 }
\DoxyCodeLine{1747         \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{1748             progressCounter++;}
\DoxyCodeLine{1749             \textcolor{keywordflow}{if}( progressCounter \% 5000 == 0 ) \{}
\DoxyCodeLine{1750                 printf(\textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}});}
\DoxyCodeLine{1751                 \textcolor{keywordflow}{switch}( progressCounter ) \{}
\DoxyCodeLine{1752                     \textcolor{keywordflow}{case} 5000:  printf(\textcolor{stringliteral}{"{}[.stl]: scanning \%s...\(\backslash\)\(\backslash\)"{}}, \_filename);  \textcolor{keywordflow}{break};}
\DoxyCodeLine{1753                     \textcolor{keywordflow}{case} 10000: printf(\textcolor{stringliteral}{"{}[.stl]: scanning \%s...|"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{1754                     \textcolor{keywordflow}{case} 15000: printf(\textcolor{stringliteral}{"{}[.stl]: scanning \%s.../"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{1755                     \textcolor{keywordflow}{case} 20000: printf(\textcolor{stringliteral}{"{}[.stl]: scanning \%s...-\/"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{1756                 \}}
\DoxyCodeLine{1757                 fflush(stdout);}
\DoxyCodeLine{1758             \}}
\DoxyCodeLine{1759             \textcolor{keywordflow}{if}( progressCounter == 20000 )}
\DoxyCodeLine{1760                 progressCounter = 0;}
\DoxyCodeLine{1761         \}}
\DoxyCodeLine{1762     \}}
\DoxyCodeLine{1763     in.close();}
\DoxyCodeLine{1764 }
\DoxyCodeLine{1765     \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{1766         printf( \textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}} );}
\DoxyCodeLine{1767         printf( \textcolor{stringliteral}{"{}[.stl]: scanning \%s...done!\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1768         printf( \textcolor{stringliteral}{"{}[.stl]: -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}} );}
\DoxyCodeLine{1769         printf( \textcolor{stringliteral}{"{}[.stl]: Model Stats:\(\backslash\)n"{}} );}
\DoxyCodeLine{1770         printf( \textcolor{stringliteral}{"{}[.stl]: Vertices:  \(\backslash\)t\%u\(\backslash\)tNormals:   \(\backslash\)t\%u\(\backslash\)tTex Coords:\(\backslash\)t\%u\(\backslash\)n"{}}, numVertices, numNormals, 0 );}
\DoxyCodeLine{1771         printf( \textcolor{stringliteral}{"{}[.stl]: Faces:     \(\backslash\)t\%u\(\backslash\)tTriangles: \(\backslash\)t\%u\(\backslash\)n"{}}, numFaces, numTriangles );}
\DoxyCodeLine{1772         printf( \textcolor{stringliteral}{"{}[.stl]: Dimensions:\(\backslash\)t(\%f, \%f, \%f)\(\backslash\)n"{}}, (maxX -\/ minX), (maxY -\/ minY), (maxZ -\/ minZ) );}
\DoxyCodeLine{1773     \}}
\DoxyCodeLine{1774 }
\DoxyCodeLine{1775     \_vertices = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numVertices * 3);}
\DoxyCodeLine{1776     \_texCoords = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numVertices * 2);}
\DoxyCodeLine{1777     \_normals = (GLfloat*)malloc(\textcolor{keyword}{sizeof}(GLfloat) * numVertices * 3);}
\DoxyCodeLine{1778     \_indices = (GLuint*)malloc(\textcolor{keyword}{sizeof}(GLuint) * numTriangles * 3);}
\DoxyCodeLine{1779 }
\DoxyCodeLine{1780     \textcolor{keywordflow}{if} (INFO) printf( \textcolor{stringliteral}{"{}[.stl]: -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n"{}} );}
\DoxyCodeLine{1781 }
\DoxyCodeLine{1782     in.open( \_filename );}
\DoxyCodeLine{1783 }
\DoxyCodeLine{1784     \_uniqueIndex = 0;}
\DoxyCodeLine{1785     \_numIndices = 0;}
\DoxyCodeLine{1786 }
\DoxyCodeLine{1787     \textcolor{keywordflow}{while}( getline( in, line ) ) \{}
\DoxyCodeLine{1788         \textcolor{keywordflow}{if}( line.length() > 1 \&\& line.at(0) == \textcolor{charliteral}{'\(\backslash\)t'} )}
\DoxyCodeLine{1789             line = line.substr( 1 );}
\DoxyCodeLine{1790         line.erase( line.find\_last\_not\_of( \textcolor{stringliteral}{"{} \(\backslash\)n\(\backslash\)r\(\backslash\)t"{}} ) + 1 );}
\DoxyCodeLine{1791 }
\DoxyCodeLine{1792         std::vector< std::string > tokens = \_tokenizeString( line, \textcolor{stringliteral}{"{} \(\backslash\)t"{}} );}
\DoxyCodeLine{1793 }
\DoxyCodeLine{1794         \textcolor{keywordflow}{if}( tokens.size() < 1 ) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1795 }
\DoxyCodeLine{1796         \textcolor{comment}{//the line should have a single character that lets us know if it's a...}}
\DoxyCodeLine{1797         \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}solid"{}} ) ) \{}
\DoxyCodeLine{1798         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}facet"{}} ) ) \{}
\DoxyCodeLine{1799             \textcolor{comment}{/* read in x y z triangle normal */}}
\DoxyCodeLine{1800             normalVector[0] = atof( tokens[2].c\_str() );}
\DoxyCodeLine{1801             normalVector[1] = atof( tokens[3].c\_str() );}
\DoxyCodeLine{1802             normalVector[2] = atof( tokens[4].c\_str() );}
\DoxyCodeLine{1803         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}outer"{}} ) \&\& !tokens[1].compare( \textcolor{stringliteral}{"{}loop"{}} ) ) \{}
\DoxyCodeLine{1804             \textcolor{comment}{// begin a primitive}}
\DoxyCodeLine{1805         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}vertex"{}} ) ) \{}
\DoxyCodeLine{1806             \textcolor{keywordtype}{float} x = atof( tokens[1].c\_str() ),}
\DoxyCodeLine{1807                     y = atof( tokens[2].c\_str() ),}
\DoxyCodeLine{1808                     z = atof( tokens[3].c\_str() );}
\DoxyCodeLine{1809 }
\DoxyCodeLine{1810             \_vertices[ \_uniqueIndex*3 + 0 ] = x;}
\DoxyCodeLine{1811             \_vertices[ \_uniqueIndex*3 + 1 ] = y;}
\DoxyCodeLine{1812             \_vertices[ \_uniqueIndex*3 + 2 ] = z;}
\DoxyCodeLine{1813 }
\DoxyCodeLine{1814             \_normals[ \_uniqueIndex*3 + 0 ] = normalVector[0];}
\DoxyCodeLine{1815             \_normals[ \_uniqueIndex*3 + 1 ] = normalVector[1];}
\DoxyCodeLine{1816             \_normals[ \_uniqueIndex*3 + 2 ] = normalVector[2];}
\DoxyCodeLine{1817 }
\DoxyCodeLine{1818             \_indices[ \_numIndices++ ] = \_uniqueIndex++;}
\DoxyCodeLine{1819         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}endloop"{}} ) ) \{}
\DoxyCodeLine{1820             \textcolor{comment}{// end primitive}}
\DoxyCodeLine{1821         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}endfacet"{}} ) ) \{}
\DoxyCodeLine{1822 }
\DoxyCodeLine{1823         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !tokens[0].compare( \textcolor{stringliteral}{"{}endsolid"{}} ) ) \{}
\DoxyCodeLine{1824 }
\DoxyCodeLine{1825         \}}
\DoxyCodeLine{1826         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1827 }
\DoxyCodeLine{1828         \}}
\DoxyCodeLine{1829 }
\DoxyCodeLine{1830         \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{1831             progressCounter++;}
\DoxyCodeLine{1832             \textcolor{keywordflow}{if}( progressCounter \% 5000 == 0 ) \{}
\DoxyCodeLine{1833                 printf(\textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}});}
\DoxyCodeLine{1834                 \textcolor{keywordflow}{switch}( progressCounter ) \{}
\DoxyCodeLine{1835                     \textcolor{keywordflow}{case} 5000:  printf(\textcolor{stringliteral}{"{}[.stl]: parsing \%s...\(\backslash\)\(\backslash\)"{}}, \_filename);   \textcolor{keywordflow}{break};}
\DoxyCodeLine{1836                     \textcolor{keywordflow}{case} 10000: printf(\textcolor{stringliteral}{"{}[.stl]: parsing \%s...|"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{1837                     \textcolor{keywordflow}{case} 15000: printf(\textcolor{stringliteral}{"{}[.stl]: parsing \%s.../"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{1838                     \textcolor{keywordflow}{case} 20000: printf(\textcolor{stringliteral}{"{}[.stl]: parsing \%s...-\/"{}}, \_filename);    \textcolor{keywordflow}{break};}
\DoxyCodeLine{1839                 \}}
\DoxyCodeLine{1840                 fflush(stdout);}
\DoxyCodeLine{1841             \}}
\DoxyCodeLine{1842             \textcolor{keywordflow}{if}( progressCounter == 20000 )}
\DoxyCodeLine{1843                 progressCounter = 0;}
\DoxyCodeLine{1844         \}}
\DoxyCodeLine{1845     \}}
\DoxyCodeLine{1846     in.close();}
\DoxyCodeLine{1847 }
\DoxyCodeLine{1848     glBindVertexArray( \_vaod );}
\DoxyCodeLine{1849     glBindBuffer( GL\_ARRAY\_BUFFER, \_vbods[0] );}
\DoxyCodeLine{1850     glBufferData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 8, NULL, GL\_STATIC\_DRAW );}
\DoxyCodeLine{1851     glBufferSubData( GL\_ARRAY\_BUFFER, 0,                                                                  \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \_vertices );}
\DoxyCodeLine{1852     glBufferSubData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 3, \_normals );}
\DoxyCodeLine{1853     glBufferSubData( GL\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 6, \textcolor{keyword}{sizeof}(GLfloat) * \_uniqueIndex * 2, \_texCoords );}
\DoxyCodeLine{1854 }
\DoxyCodeLine{1855     glBindBuffer( GL\_ELEMENT\_ARRAY\_BUFFER, \_vbods[1] );}
\DoxyCodeLine{1856     glBufferData( GL\_ELEMENT\_ARRAY\_BUFFER, \textcolor{keyword}{sizeof}(GLuint) * \_numIndices, \_indices, GL\_STATIC\_DRAW );}
\DoxyCodeLine{1857 }
\DoxyCodeLine{1858     time(\&end);}
\DoxyCodeLine{1859     \textcolor{keywordtype}{double} seconds = difftime( end, start );}
\DoxyCodeLine{1860 }
\DoxyCodeLine{1861     \textcolor{keywordflow}{if} (INFO) \{}
\DoxyCodeLine{1862         printf(\textcolor{stringliteral}{"{}\(\backslash\)33[2K\(\backslash\)r"{}});}
\DoxyCodeLine{1863         printf(\textcolor{stringliteral}{"{}[.stl]: parsing \%s...done!\(\backslash\)n[.stl]: Time to complete: \%.3fs\(\backslash\)n"{}}, \_filename, seconds);}
\DoxyCodeLine{1864         printf( \textcolor{stringliteral}{"{}[.stl]: -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/  END \%s Info  -\/=-\/=-\/=-\/=-\/=-\/=-\/=-\/\(\backslash\)n\(\backslash\)n"{}}, \_filename );}
\DoxyCodeLine{1865     \}}
\DoxyCodeLine{1866 }
\DoxyCodeLine{1867     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1868 \}}
\DoxyCodeLine{1869 }
\DoxyCodeLine{1870 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_a202848314c149e59b5211858ff082072}{CSCI441::ModelLoader::enableAutoGenerateNormals}}() \{}
\DoxyCodeLine{1871     AUTO\_GEN\_NORMALS = \textcolor{keyword}{true};}
\DoxyCodeLine{1872 \}}
\DoxyCodeLine{1873 }
\DoxyCodeLine{1874 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_c_s_c_i441_1_1_model_loader_aaf1ec38a0f551569ccf1a47af2a561f3}{CSCI441::ModelLoader::disableAutoGenerateNormals}}() \{}
\DoxyCodeLine{1875     AUTO\_GEN\_NORMALS = \textcolor{keyword}{false};}
\DoxyCodeLine{1876 \}}
\DoxyCodeLine{1877 }
\DoxyCodeLine{1878 \textcolor{comment}{//}}
\DoxyCodeLine{1879 \textcolor{comment}{//  vector<string> tokenizeString(string input, string delimiters)}}
\DoxyCodeLine{1880 \textcolor{comment}{//}}
\DoxyCodeLine{1881 \textcolor{comment}{//      This is a helper function to break a single string into std::vector}}
\DoxyCodeLine{1882 \textcolor{comment}{//  of strings, based on a given set of delimiter characters.}}
\DoxyCodeLine{1883 \textcolor{comment}{//}}
\DoxyCodeLine{1884 \textcolor{keyword}{inline} std::vector<std::string> CSCI441::ModelLoader::\_tokenizeString(std::string input, std::string delimiters) \{}
\DoxyCodeLine{1885     \textcolor{keywordflow}{if}(input.size() == 0)}
\DoxyCodeLine{1886         \textcolor{keywordflow}{return} std::vector<std::string>();}
\DoxyCodeLine{1887 }
\DoxyCodeLine{1888     std::vector<std::string> retVec = std::vector<std::string>();}
\DoxyCodeLine{1889     \textcolor{keywordtype}{size\_t} oldR = 0, r = 0;}
\DoxyCodeLine{1890 }
\DoxyCodeLine{1891     \textcolor{comment}{//strip all delimiter characters from the front and end of the input string.}}
\DoxyCodeLine{1892     std::string strippedInput;}
\DoxyCodeLine{1893     \textcolor{keywordtype}{int} lowerValidIndex = 0, upperValidIndex = input.size() -\/ 1;}
\DoxyCodeLine{1894     \textcolor{keywordflow}{while}((GLuint)lowerValidIndex < input.size() \&\& delimiters.find\_first\_of(input.at(lowerValidIndex), 0) != std::string::npos)}
\DoxyCodeLine{1895         lowerValidIndex++;}
\DoxyCodeLine{1896 }
\DoxyCodeLine{1897     \textcolor{keywordflow}{while}(upperValidIndex >= 0 \&\& delimiters.find\_first\_of(input.at(upperValidIndex), 0) != std::string::npos)}
\DoxyCodeLine{1898         upperValidIndex-\/-\/;}
\DoxyCodeLine{1899 }
\DoxyCodeLine{1900     \textcolor{comment}{//if the lowest valid index is higher than the highest valid index, they're all delimiters! return nothing.}}
\DoxyCodeLine{1901     \textcolor{keywordflow}{if}((GLuint)lowerValidIndex >= input.size() || upperValidIndex < 0 || lowerValidIndex > upperValidIndex)}
\DoxyCodeLine{1902         \textcolor{keywordflow}{return} std::vector<std::string>();}
\DoxyCodeLine{1903 }
\DoxyCodeLine{1904     \textcolor{comment}{//remove the delimiters from the beginning and end of the string, if any.}}
\DoxyCodeLine{1905     strippedInput = input.substr(lowerValidIndex, upperValidIndex-\/lowerValidIndex+1);}
\DoxyCodeLine{1906 }
\DoxyCodeLine{1907     \textcolor{comment}{//search for each instance of a delimiter character, and create a new token spanning}}
\DoxyCodeLine{1908     \textcolor{comment}{//from the last valid character up to the delimiter character.}}
\DoxyCodeLine{1909     \textcolor{keywordflow}{while}((r = strippedInput.find\_first\_of(delimiters, oldR)) != std::string::npos)}
\DoxyCodeLine{1910     \{}
\DoxyCodeLine{1911         \textcolor{keywordflow}{if}(oldR != r)           \textcolor{comment}{//but watch out for multiple consecutive delimiters!}}
\DoxyCodeLine{1912             retVec.push\_back(strippedInput.substr(oldR, r-\/oldR));}
\DoxyCodeLine{1913         oldR = r+1;}
\DoxyCodeLine{1914     \}}
\DoxyCodeLine{1915     \textcolor{keywordflow}{if}(r != 0)}
\DoxyCodeLine{1916         retVec.push\_back(strippedInput.substr(oldR, r-\/oldR));}
\DoxyCodeLine{1917 }
\DoxyCodeLine{1918     \textcolor{keywordflow}{return} retVec;}
\DoxyCodeLine{1919 \}}
\DoxyCodeLine{1920 }
\DoxyCodeLine{1921 \textcolor{keyword}{inline} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}* CSCI441\_INTERNAL::createTransparentTexture( \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *imageData, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *imageMask, \textcolor{keywordtype}{int} texWidth, \textcolor{keywordtype}{int} texHeight, \textcolor{keywordtype}{int} texChannels, \textcolor{keywordtype}{int} maskChannels ) \{}
\DoxyCodeLine{1922     \textcolor{comment}{//combine the 'mask' array with the image data array into an RGBA array.}}
\DoxyCodeLine{1923     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *fullData = \textcolor{keyword}{new} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}[texWidth*texHeight*4];}
\DoxyCodeLine{1924 }
\DoxyCodeLine{1925     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j = 0; j < texHeight; j++) \{}
\DoxyCodeLine{1926         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < texWidth; i++) \{}
\DoxyCodeLine{1927             \textcolor{keywordflow}{if}( imageData ) \{}
\DoxyCodeLine{1928                 fullData[(j*texWidth+i)*4+0] = imageData[(j*texWidth+i)*texChannels+0]; \textcolor{comment}{// R}}
\DoxyCodeLine{1929                 fullData[(j*texWidth+i)*4+1] = imageData[(j*texWidth+i)*texChannels+1]; \textcolor{comment}{// G}}
\DoxyCodeLine{1930                 fullData[(j*texWidth+i)*4+2] = imageData[(j*texWidth+i)*texChannels+2]; \textcolor{comment}{// B}}
\DoxyCodeLine{1931             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1932                 fullData[(j*texWidth+i)*4+0] = 1;   \textcolor{comment}{// R}}
\DoxyCodeLine{1933                 fullData[(j*texWidth+i)*4+1] = 1;   \textcolor{comment}{// G}}
\DoxyCodeLine{1934                 fullData[(j*texWidth+i)*4+2] = 1;   \textcolor{comment}{// B}}
\DoxyCodeLine{1935             \}}
\DoxyCodeLine{1936 }
\DoxyCodeLine{1937             \textcolor{keywordflow}{if}( imageMask ) \{}
\DoxyCodeLine{1938                 fullData[(j*texWidth+i)*4+3] = imageMask[(j*texWidth+i)*maskChannels+0];    \textcolor{comment}{// A}}
\DoxyCodeLine{1939             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1940                 fullData[(j*texWidth+i)*4+3] = 1;   \textcolor{comment}{// A}}
\DoxyCodeLine{1941             \}}
\DoxyCodeLine{1942         \}}
\DoxyCodeLine{1943     \}}
\DoxyCodeLine{1944     \textcolor{keywordflow}{return} fullData;}
\DoxyCodeLine{1945 \}}
\DoxyCodeLine{1946 }
\DoxyCodeLine{1947 \textcolor{keyword}{inline} \textcolor{keywordtype}{void} CSCI441\_INTERNAL::flipImageY( \textcolor{keywordtype}{int} texWidth, \textcolor{keywordtype}{int} texHeight, \textcolor{keywordtype}{int} textureChannels, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *textureData ) \{}
\DoxyCodeLine{1948     \textcolor{keywordflow}{for}( \textcolor{keywordtype}{int} j = 0; j < texHeight / 2; j++ ) \{}
\DoxyCodeLine{1949         \textcolor{keywordflow}{for}( \textcolor{keywordtype}{int} i = 0; i < texWidth; i++ ) \{}
\DoxyCodeLine{1950             \textcolor{keywordflow}{for}( \textcolor{keywordtype}{int} k = 0; k < textureChannels; k++ ) \{}
\DoxyCodeLine{1951                 \textcolor{keywordtype}{int} top = (j*texWidth + i)*textureChannels + k;}
\DoxyCodeLine{1952                 \textcolor{keywordtype}{int} bot = ((texHeight-\/j-\/1)*texWidth + i)*textureChannels + k;}
\DoxyCodeLine{1953 }
\DoxyCodeLine{1954                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} t = textureData[top];}
\DoxyCodeLine{1955                 textureData[top] = textureData[bot];}
\DoxyCodeLine{1956                 textureData[bot] = t;}
\DoxyCodeLine{1957 }
\DoxyCodeLine{1958             \}}
\DoxyCodeLine{1959         \}}
\DoxyCodeLine{1960     \}}
\DoxyCodeLine{1961 \}}
\DoxyCodeLine{1962 }
\DoxyCodeLine{1963 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// \_\_CSCI441\_MODELLOADER\_HPP\_\_}}

\end{DoxyCode}
